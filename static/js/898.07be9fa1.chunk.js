(self.webpackChunkstate_mgmt_examples=self.webpackChunkstate_mgmt_examples||[]).push([[898],{2108:function(e,n,t){"use strict";t.d(n,{Tt:function(){return S},ZP:function(){return g},Rf:function(){return b}});var r=t(7757),u=t.n(r),s=t(8926),c=t.n(s),i=t(4575),a=t.n(i),o=t(3913),l=t.n(o),f=t(9713),d=t.n(f),m=t(6967),v=t(7808),h=t.n(v),p=function(){function e(){var n=this;a()(this,e),d()(this,"requests",[]),d()(this,"subscribers",[]),d()(this,"getUsers",(function(){return n._fetch("/users")})),d()(this,"addUser",function(){var e=c()(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.addRequest("POST /users"),e.next=3,(0,m.gw)(2e3);case 3:return n.addRequest("OK /users"),e.abrupt("return",{name:t,id:(0,m.EL)()});case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),d()(this,"removeUser",function(){var e=c()(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.addRequest("DELETE /users/".concat(t.id)),e.next=3,(0,m.gw)(2e3);case 3:n.addRequest("OK /users/".concat(t.id));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),d()(this,"clearRequests",(function(){n.requests=[],n.notifySubscribers()}))}var n,t;return l()(e,[{key:"_fetch",value:(t=c()(u().mark((function e(n){var t,r,s,i=this,a=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>1&&void 0!==a[1]?a[1]:{},r=t.delayMs,s=n.replace(this.baseUrl,""),this.addRequest("GET ".concat(s)),e.abrupt("return",this._mockFetch(n).then((function(e){if(!e.ok)throw new Error("Request to ".concat(n," failed with HTTP").concat(e.status));return e})).then((function(e){return e.json()})).then(function(){var e=c()(u().mark((function e(n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.gw)(r||2e3);case 2:return i.addRequest("OK ".concat(s)),e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"subscribe",value:function(e){this.subscribers.push(e),e(this.reqests)}},{key:"unSubscribe",value:function(e){this.subscribers=this.subscribers.filter((function(n){return n!==e}))}},{key:"addRequest",value:function(e){this.requests.push(e),this.notifySubscribers()}},{key:"notifySubscribers",value:function(){var e=this;this.subscribers.forEach((function(n){return n(e.requests)}))}},{key:"_mockFetch",value:(n=c()(u().mark((function e(n){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h()[n],e.abrupt("return",{ok:!!t,status:t?200:404,json:function(){return new Promise((function(e){return e(t)}))}});case 2:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})}]),e}(),E=new p,g=E,b=E.getUsers,k=t(3038),y=t.n(k),w=t(7294),x=t(5049),U=t(3520);function S(){var e=(0,w.useReducer)((function(e){return e+1}),0),n=y()(e,2)[1];(0,w.useEffect)((function(){return g.subscribe(n),function(){g.unSubscribe(n),g.clearRequests()}}),[]);var t=g.requests.length,r=t>10?t-10:0;return w.createElement("section",null,w.createElement(x.H3,{onClick:g.clearRequests,style:{cursor:"pointer"}},"API requests, click to reset"),w.createElement(U.a,null,t>10&&w.createElement(U.H,null,"..."),g.requests.slice(r).map((function(e,n){return w.createElement(U.H,{key:n},e)}))))}},7808:function(e){e.exports={"/users":[{id:1,name:"John Doe"},{id:2,name:"Jane Doe"}]}},1830:function(e,n,t){"use strict";t.d(n,{E:function(){return s}});var r=t(9163),u=t(9848),s=r.ZP.div.withConfig({displayName:"Containers__FlexContainer",componentId:"osdxjy-0"})(["display:flex;& > * + *{margin-left:5rem;border-left:1px dashed ",";padding-left:2rem;}"],u.A2)},3242:function(e,n,t){"use strict";t.d(n,{Z:function(){return f}});var r=t(7154),u=t.n(r),s=t(3038),c=t.n(s),i=t(6479),a=t.n(i),o=t(7294),l=t(9163).ZP.input.withConfig({displayName:"Input__StyledInput",componentId:"tgycnj-0"})(["margin-right:1rem;&[disabled]{text-decoration:line-through;}"]);function f(e){var n=e.children,t=e.disabled,r=a()(e,["children","disabled"]),s=(0,o.useState)(""),i=c()(s,2),f=i[0],d=i[1];return(0,o.useEffect)((function(){!t&&d("")}),[t]),o.createElement("div",null,o.createElement(l,u()({type:"text",disabled:t,value:f,onChange:function(e){return d(e.target.value)}},r)),n(f))}},1162:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var r=t(3038),u=t.n(r),s=t(7294),c=t(5109);function i(e){var n=e.initiallyMounted,t=e.children,r=(0,s.useReducer)((function(e){return!e}),!!n),i=u()(r,2),a=i[0],o=i[1];return s.createElement(s.Fragment,null,s.createElement(c.Z,{onClick:o},a?"Unmount":"Mount"),a&&t)}},6967:function(e,n,t){"use strict";t.d(n,{gw:function(){return r},EL:function(){return s},ZT:function(){return c}});var r=function(e){return new Promise((function(n){return setTimeout(n,e)}))},u=10,s=function(){return u++},c=function(){}},8898:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return x}});var r=t(7294),u=t(8876),s=t(7703),c=t(2108),i=(0,u.Jg)({actions:function(){return{load:!0,loadSuccess:function(e){return{users:e}},loadFailure:!0,add:function(e){return{name:e}},addSuccess:function(e){return{user:e}},addFailure:!0,remove:function(e){return{user:e}},removeSuccess:function(e){return{user:e}},removeFailure:!0}},reducers:function(){return{users:[[],{loadSuccess:function(e,n){return n.users},addSuccess:function(e,n){var t=n.user;return e.concat(t)},removeSuccess:function(e,n){var t=n.user;return e.filter((function(e){return e.id!==t.id}))}}],hasLoaded:[!1,{loadSuccess:function(){return!0}}],isLoading:[!1,{load:function(){return!0},loadSuccess:function(){return!1},loadFailure:function(){return!1}}],error:[!1,{load:function(){return!1},loadFailure:function(){return!0}}],isAdding:[!1,{add:function(){return!0},addSuccess:function(){return!1},addFailure:function(){return!1}}],addingError:[!1,{add:function(){return!1},addFailure:function(){return!0}}],isRemoving:[!1,{remove:function(){return!0},removeSuccess:function(){return!1},removeFailure:function(){return!1}}],removingError:[!1,{remove:function(){return!1},removeFailure:function(){return!0}}]}},listeners:function(e){var n=e.actions;return{load:function(){return c.ZP.getUsers().then((function(e){return n.loadSuccess(e)})).catch((function(){return n.loadFailure()}))},add:function(e){var t=e.name;return c.ZP.addUser(t).then((function(e){return n.addSuccess(e)})).catch((function(){return n.addFailure()}))},remove:function(e){var t=e.user;return c.ZP.removeUser(t).then((function(){return n.removeSuccess(t)})).catch((function(){return n.removeFailure()}))}}}}),a=t(3520),o=t(3082),l=r.memo((function(e){var n=e.name,t=e.id;(0,o.tc)("UserItem: ".concat(n));var s=(0,u.ol)(i).remove;return r.createElement(a.H,{onRemove:function(){return s({name:n,id:t})}},n)})),f=t(2938);function d(){(0,o.tc)("UserList");var e=(0,u.ol)(i).load,n=(0,u.sP)(i),t=n.users,s=n.isLoading,c=n.hasLoaded,d=n.error;return(0,r.useEffect)((function(){e()}),[e]),s||!c?r.createElement(f.a,null):d?r.createElement(f.j,null):r.createElement(a.a,null,t.map((function(e){return r.createElement(l,{key:e.id,id:e.id,name:e.name})})))}var m=t(5109),v=t(3242);function h(){(0,o.tc)("UserInput");var e=(0,u.sP)(i).isAdding,n=(0,u.ol)(i).add;return r.createElement(v.Z,{disabled:e},(function(t){return r.createElement(m.Z,{disabled:e,onClick:function(){return n(t)}},"Add user")}))}function p(){(0,o.tc)("UserIndicators");var e=(0,u.sP)(i),n=e.isRemoving,t=e.errorRemoving,s=e.isAdding,c=e.errorAdding;return r.createElement(r.Fragment,null,n&&r.createElement(f.a,null,"Removing user..."),t&&r.createElement(f.j,null,"Failed to remove user"),s&&r.createElement(f.a,null,"Adding user..."),c&&r.createElement(f.j,null,"Failed to add user"))}function E(){return r.createElement(s.Provider,{store:(0,u.fw)().store},r.createElement(d,null),r.createElement(h,null),r.createElement(p,null))}(0,u.u_)();var g=t(6406),b=t(5049),k=t(1162),y=t(5943),w=t(1830);function x(){return r.createElement(r.Fragment,null,r.createElement(b.H1,null,"Kea"),r.createElement(m._,null,r.createElement(y.Ou,{text:"logic.js",fileName:"components/kea/logic.js"}),r.createElement(y.Ou,{text:"UsersWrapper.js",fileName:"components/kea/UsersWrapper.js"}),r.createElement(y.Ou,{text:"UserList.js",fileName:"components/kea/UserList.js"}),r.createElement(y.Ou,{text:"UserItem.js",fileName:"components/kea/UserItem.js"}),r.createElement(y.Ou,{text:"UserInput.js",fileName:"components/kea/UserInput.js"}),r.createElement(y.Ou,{text:"UserIndicators.js",fileName:"components/kea/UserIndicators.js"})),r.createElement(k.Z,null,r.createElement(E,null)),r.createElement(w.E,null,r.createElement(g.Z,null),r.createElement(c.Tt,null)))}}}]);