(self.webpackChunkstate_mgmt_examples=self.webpackChunkstate_mgmt_examples||[]).push([[571],{2108:function(e,t,n){"use strict";n.d(t,{Tt:function(){return y},ZP:function(){return v},Rf:function(){return g}});var r=n(7757),u=n.n(r),s=n(8926),c=n.n(s),i=n(4575),a=n.n(i),o=n(3913),l=n.n(o),f=n(9713),d=n.n(f),E=n(6967),m=n(7808),h=n.n(m),R=function(){function e(){var t=this;a()(this,e),d()(this,"requests",[]),d()(this,"subscribers",[]),d()(this,"getUsers",(function(){return t._fetch("/users")})),d()(this,"addUser",function(){var e=c()(u().mark((function e(n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.addRequest("POST /users"),e.next=3,(0,E.gw)(2e3);case 3:return t.addRequest("OK /users"),e.abrupt("return",{name:n,id:(0,E.EL)()});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),d()(this,"removeUser",function(){var e=c()(u().mark((function e(n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.addRequest("DELETE /users/".concat(n.id)),e.next=3,(0,E.gw)(2e3);case 3:t.addRequest("OK /users/".concat(n.id));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),d()(this,"clearRequests",(function(){t.requests=[],t.notifySubscribers()}))}var t,n;return l()(e,[{key:"_fetch",value:(n=c()(u().mark((function e(t){var n,r,s,i=this,a=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},r=n.delayMs,s=t.replace(this.baseUrl,""),this.addRequest("GET ".concat(s)),e.abrupt("return",this._mockFetch(t).then((function(e){if(!e.ok)throw new Error("Request to ".concat(t," failed with HTTP").concat(e.status));return e})).then((function(e){return e.json()})).then(function(){var e=c()(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.gw)(r||2e3);case 2:return i.addRequest("OK ".concat(s)),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"subscribe",value:function(e){this.subscribers.push(e),e(this.reqests)}},{key:"unSubscribe",value:function(e){this.subscribers=this.subscribers.filter((function(t){return t!==e}))}},{key:"addRequest",value:function(e){this.requests.push(e),this.notifySubscribers()}},{key:"notifySubscribers",value:function(){var e=this;this.subscribers.forEach((function(t){return t(e.requests)}))}},{key:"_mockFetch",value:(t=c()(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h()[t],e.abrupt("return",{ok:!!n,status:n?200:404,json:function(){return new Promise((function(e){return e(n)}))}});case 2:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}(),p=new R,v=p,g=p.getUsers,b=n(3038),O=n.n(b),D=n(7294),S=n(5049),A=n(3520),_=$RefreshSig$();function y(){_();var e=(0,D.useReducer)((function(e){return e+1}),0),t=O()(e,2)[1];(0,D.useEffect)((function(){return v.subscribe(t),function(){v.unSubscribe(t),v.clearRequests()}}),[]);var n=v.requests.length,r=n>10?n-10:0;return D.createElement("section",null,D.createElement(S.H3,{onClick:v.clearRequests,style:{cursor:"pointer"}},"API requests, click to reset"),D.createElement(A.a,null,n>10&&D.createElement(A.H,null,"..."),v.requests.slice(r).map((function(e,t){return D.createElement(A.H,{key:t},e)}))))}_(y,"UxqsAPbyOOo6jkpO1hjMpCydUI8="),$RefreshReg$(y,"ApiRequests")},7808:function(e){e.exports={"/users":[{id:1,name:"John Doe"},{id:2,name:"Jane Doe"}]}},1830:function(e,t,n){"use strict";n.d(t,{E:function(){return s}});var r=n(9163),u=n(9848),s=r.ZP.div.withConfig({displayName:"Containers__FlexContainer",componentId:"osdxjy-0"})(["display:flex;& > * + *{margin-left:5rem;border-left:1px dashed ",";padding-left:2rem;}"],u.A2)},3242:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r,u,s=n(7154),c=n.n(s),i=n(3038),a=n.n(i),o=n(6479),l=n.n(o),f=n(7294),d=n(9163),E=$RefreshSig$(),m=d.ZP.input.withConfig({displayName:"Input__StyledInput",componentId:"tgycnj-0"})(["margin-right:1rem;&[disabled]{text-decoration:line-through;}"]);function h(e){E();var t=e.children,n=e.disabled,r=l()(e,["children","disabled"]),u=(0,f.useState)(""),s=a()(u,2),i=s[0],o=s[1];return(0,f.useEffect)((function(){!n&&o("")}),[n]),f.createElement("div",null,f.createElement(m,c()({type:"text",disabled:n,value:i,onChange:function(e){return o(e.target.value)}},r)),t(i))}r=m,E(h,"aFIykL0K1j3we4veeaDstLdSuC8="),u=h,$RefreshReg$(r,"StyledInput"),$RefreshReg$(u,"Input")},1162:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(3038),u=n.n(r),s=n(7294),c=n(5109),i=$RefreshSig$();function a(e){i();var t=e.initiallyMounted,n=e.children,r=(0,s.useReducer)((function(e){return!e}),!!t),a=u()(r,2),o=a[0],l=a[1];return s.createElement(s.Fragment,null,s.createElement(c.Z,{onClick:l},o?"Unmount":"Mount"),o&&n)}i(a,"SGBRyZ8qj4KP74qoZGVxnnGCTRI="),$RefreshReg$(a,"MountToggle")},6967:function(e,t,n){"use strict";n.d(t,{gw:function(){return r},EL:function(){return s},ZT:function(){return c}});var r=function(e){return new Promise((function(t){return setTimeout(t,e)}))},u=10,s=function(){return u++},c=function(){}},2571:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Y}});var r,u,s,c,i,a,o,l,f=n(7294),d=n(9713),E=n.n(d),m=n(629),h=n(375),R="IDLE",p="NOT_LOADED",v="LOADING",g="LOAD_ERROR",b="ADDING",O="ADD_ERROR",D="REMOVING",S="REMOVE_ERROR",A="LOAD",_="LOAD_SUCCESS",y="LOAD_FAILURE",L="ADD",w="ADD_SUCCESS",U="ADD_FAILURE",k="REMOVE",x="REMOVE_SUCCESS",C="REMOVE_FAILURE",q=(0,m.J)({id:"users",initial:p,context:{users:[]},states:(l={},E()(l,p,{on:E()({},A,v)}),E()(l,R,{on:(r={},E()(r,L,b),E()(r,k,D),r)}),E()(l,v,{on:(u={},E()(u,_,{target:R,actions:(0,h.f0)({users:function(e,t){return e.users.concat(t.users)}})}),E()(u,y,g),u)}),E()(l,g,(s={},E()(s,L,b),E()(s,k,D),s)),E()(l,b,{on:(c={},E()(c,w,{target:R,actions:(0,h.f0)({users:function(e,t){return e.users.concat(t.user)}})}),E()(c,U,O),c)}),E()(l,O,(i={},E()(i,L,b),E()(i,k,D),i)),E()(l,D,{on:(a={},E()(a,x,{target:R,actions:(0,h.f0)({users:function(e,t){return e.users.filter((function(e){return e.id!==t.user.id}))}})}),E()(a,C,S),a)}),E()(l,S,(o={},E()(o,L,b),E()(o,k,D),o)),l)}),I=n(3038),$=n.n(I),j=n(7845),M=n(2108),Z=$RefreshSig$();function F(){Z();var e=(0,j.useMachine)(q),t=$()(e,2),n=t[0],r=n.value,u=n.context,s=t[1],c=r===p;return(0,f.useEffect)((function(){c&&(s("LOAD"),M.ZP.getUsers().then((function(e){return s("LOAD_SUCCESS",{users:e})})).catch((function(){return s("LOAD_FAILURE")})))}),[c,s]),{state:r,users:u.users,add:function(e){s("ADD"),M.ZP.addUser(e).then((function(e){return s("ADD_SUCCESS",{user:e})})).catch((function(){return s("ADD_FAILURE")}))},remove:function(e){s("REMOVE"),M.ZP.removeUser(e).then((function(){return s("REMOVE_SUCCESS",{user:e})})).catch((function(){return s("REMOVE_FAILURE")}))}}}Z(F,"HpWMLtcEltQHnvQzeoSIYwRXjdw=",!1,(function(){return[j.useMachine]}));var P=n(2938),T=n(3520),N=n(3242),V=n(5109),G=n(3082),H=$RefreshSig$(),K=b;function J(){H(),(0,G.tc)("UserList");var e=F(),t=e.state,n=e.users,r=e.add,u=e.remove;return"LOADING"===t||"NOT_LOADED"===t?f.createElement(P.a,null):"LOAD_ERROR"===t?f.createElement(P.j,null):f.createElement(f.Fragment,null,f.createElement(T.a,null,n.map((function(e){return f.createElement(T.H,{key:e.id,onRemove:function(){return u(e)}},e.name)}))),f.createElement(N.Z,{disabled:t===K},(function(e){return f.createElement(V.Z,{disabled:t===K,onClick:function(){return r(e)}},"Add user")})),"REMOVING"===t&&f.createElement(P.a,null,"Removing user..."),"REMOVE_ERROR"===t&&f.createElement(P.j,null,"Failed to remove user"),t===K&&f.createElement(P.a,null,"Adding user..."),"ADD_ERROR"===t&&f.createElement(P.j,null,"Failed to add user"))}H(J,"JK79wHC4400aqpR0LrLuJs1RdRA=",!1,(function(){return[G.tc,F]})),$RefreshReg$(J,"UserList");var X=n(5049),Q=n(5943),z=n(6406),B=n(1162),W=n(1830);function Y(){return f.createElement(f.Fragment,null,f.createElement(X.H1,null,"Xstate"),f.createElement(V._,null,f.createElement(Q.Ou,{text:"machine.js",fileName:"components/xstate/machine.js"}),f.createElement(Q.Ou,{text:"useUsers.js",fileName:"components/xstate/useUsers.js"}),f.createElement(Q.Ou,{text:"UserList.js",fileName:"components/xstate/UserList.js"})),f.createElement("br",null),f.createElement(B.Z,null,f.createElement(J,null)),f.createElement(W.E,null,f.createElement(z.Z,null),f.createElement(M.Tt,null)))}$RefreshReg$(Y,"XStateView")}}]);