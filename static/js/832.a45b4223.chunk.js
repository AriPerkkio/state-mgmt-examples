(self.webpackChunkstate_mgmt_examples=self.webpackChunkstate_mgmt_examples||[]).push([[832],{2108:function(e,t,n){"use strict";n.d(t,{Tt:function(){return S},ZP:function(){return v},Rf:function(){return R}});var r=n(7757),u=n.n(r),s=n(8926),i=n.n(s),c=n(4575),o=n.n(c),a=n(3913),l=n.n(a),d=n(9713),f=n.n(d),m=n(6967),p=n(7808),h=n.n(p),E=function(){function e(){var t=this;o()(this,e),f()(this,"requests",[]),f()(this,"subscribers",[]),f()(this,"getUsers",(function(){return t._fetch("/users")})),f()(this,"addUser",function(){var e=i()(u().mark((function e(n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.addRequest("POST /users"),e.next=3,(0,m.gw)(2e3);case 3:return t.addRequest("OK /users"),e.abrupt("return",{name:n,id:(0,m.EL)()});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),f()(this,"removeUser",function(){var e=i()(u().mark((function e(n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.addRequest("DELETE /users/".concat(n.id)),e.next=3,(0,m.gw)(2e3);case 3:t.addRequest("OK /users/".concat(n.id));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),f()(this,"clearRequests",(function(){t.requests=[],t.notifySubscribers()}))}var t,n;return l()(e,[{key:"_fetch",value:(n=i()(u().mark((function e(t){var n,r,s,c=this,o=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},r=n.delayMs,s=t.replace(this.baseUrl,""),this.addRequest("GET ".concat(s)),e.abrupt("return",this._mockFetch(t).then((function(e){if(!e.ok)throw new Error("Request to ".concat(t," failed with HTTP").concat(e.status));return e})).then((function(e){return e.json()})).then(function(){var e=i()(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.gw)(r||2e3);case 2:return c.addRequest("OK ".concat(s)),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"subscribe",value:function(e){this.subscribers.push(e),e(this.reqests)}},{key:"unSubscribe",value:function(e){this.subscribers=this.subscribers.filter((function(t){return t!==e}))}},{key:"addRequest",value:function(e){this.requests.push(e),this.notifySubscribers()}},{key:"notifySubscribers",value:function(){var e=this;this.subscribers.forEach((function(t){return t(e.requests)}))}},{key:"_mockFetch",value:(t=i()(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h()[t],e.abrupt("return",{ok:!!n,status:n?200:404,json:function(){return new Promise((function(e){return e(n)}))}});case 2:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}(),g=new E,v=g,R=g.getUsers,b=n(3038),y=n.n(b),O=n(7294),U=n(5049),_=n(3520);function S(){var e=(0,O.useReducer)((function(e){return e+1}),0),t=y()(e,2)[1];(0,O.useEffect)((function(){return v.subscribe(t),function(){v.unSubscribe(t),v.clearRequests()}}),[]);var n=v.requests.length,r=n>10?n-10:0;return O.createElement("section",null,O.createElement(U.H3,{onClick:v.clearRequests,style:{cursor:"pointer"}},"API requests, click to reset"),O.createElement(_.a,null,n>10&&O.createElement(_.H,null,"..."),v.requests.slice(r).map((function(e,t){return O.createElement(_.H,{key:t},e)}))))}},7808:function(e){e.exports={"/users":[{id:1,name:"John Doe"},{id:2,name:"Jane Doe"}]}},1830:function(e,t,n){"use strict";n.d(t,{E:function(){return s}});var r=n(9163),u=n(9848),s=r.ZP.div.withConfig({displayName:"Containers__FlexContainer",componentId:"osdxjy-0"})(["display:flex;& > * + *{margin-left:5rem;border-left:1px dashed ",";padding-left:2rem;}"],u.A2)},3242:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(7154),u=n.n(r),s=n(3038),i=n.n(s),c=n(6479),o=n.n(c),a=n(7294),l=n(9163).ZP.input.withConfig({displayName:"Input__StyledInput",componentId:"tgycnj-0"})(["margin-right:1rem;&[disabled]{text-decoration:line-through;}"]);function d(e){var t=e.children,n=e.disabled,r=o()(e,["children","disabled"]),s=(0,a.useState)(""),c=i()(s,2),d=c[0],f=c[1];return(0,a.useEffect)((function(){!n&&f("")}),[n]),a.createElement("div",null,a.createElement(l,u()({type:"text",disabled:n,value:d,onChange:function(e){return f(e.target.value)}},r)),t(d))}},1162:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(3038),u=n.n(r),s=n(7294),i=n(5109);function c(e){var t=e.initiallyMounted,n=e.children,r=(0,s.useReducer)((function(e){return!e}),!!t),c=u()(r,2),o=c[0],a=c[1];return s.createElement(s.Fragment,null,s.createElement(i.Z,{onClick:a},o?"Unmount":"Mount"),o&&n)}},6967:function(e,t,n){"use strict";n.d(t,{gw:function(){return r},EL:function(){return s},ZT:function(){return i}});var r=function(e){return new Promise((function(t){return setTimeout(t,e)}))},u=10,s=function(){return u++},i=function(){}},4832:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Z}});var r=n(7294),u=n(7703),s=n(4890),i=n(319),c=n.n(i),o=n(9713),a=n.n(o),l="ON_USERS_LOAD_START",d="ON_USERS_LOAD_SUCCESS",f="ON_USERS_LOAD_ERROR",m="ON_USER_ADD_START",p="ON_USER_ADD_SUCCESS",h="ON_USER_ADD_ERROR",E="ON_USER_REMOVE_START",g="ON_USER_REMOVE_SUCCESS",v="ON_USER_REMOVE_ERROR";function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y={users:[],isLoading:!1,hasLoaded:!1,error:!1,isAdding:!1,errorAdding:!1,isRemoving:!1,errorRemoving:!1},O=n(3520),U=n(3082),_=n(2108),S=r.memo((function(e){var t=e.name,n=e.id;(0,U.tc)("UserItem: ".concat(t));var s=(0,u.useDispatch)();return r.createElement(O.H,{onRemove:function(){s({type:E}),_.ZP.removeUser({name:t,id:n}).then((function(){return s({type:g,user:{name:t,id:n}})})).catch((function(){return s({type:v})}))}},t)})),j=n(2938),x=(0,u.connect)((function(e){return{users:e.users,isLoading:e.isLoading,shouldFetch:!e.isLoading&&!e.hasLoaded,error:e.error}}),(function(e){return{setLoading:function(){return e({type:l})},setUsers:function(t){return e(function(e){return{type:d,users:e}}(t))},setUsersError:function(){return e({type:f})}}}))((function(e){var t=e.users,n=e.isLoading,u=e.shouldFetch,s=e.error,i=e.setLoading,c=e.setUsers,o=e.setUsersError;return(0,U.tc)("UserList"),(0,r.useEffect)((function(){u&&(i(),_.ZP.getUsers().then((function(e){return c(e)})).catch((function(){return o()})))}),[u,i,c,o]),n||u?r.createElement(j.a,null):s?r.createElement(j.j,null):r.createElement(O.a,null,t.map((function(e){return r.createElement(S,{key:e.id,id:e.id,name:e.name})})))})),w=n(5109),A=n(3242);function k(){(0,U.tc)("UserInput");var e=(0,u.useSelector)((function(e){return e.isAdding})),t=(0,u.useDispatch)();return r.createElement(A.Z,{disabled:e},(function(n){return r.createElement(w.Z,{disabled:e,onClick:function(){return function(e){t({type:m}),_.ZP.addUser(e).then((function(e){return t(function(e){return{type:p,user:e}}(e))})).catch((function(){return t({type:h})}))}(n)}},"Add user")}))}function L(){(0,U.tc)("UserIndicators");var e=(0,u.useSelector)((function(e){return{isRemoving:e.isRemoving,errorRemoving:e.errorRemoving,isAdding:e.isAdding,errorAdding:e.errorAdding}})),t=e.isRemoving,n=e.errorRemoving,s=e.isAdding,i=e.errorAdding;return r.createElement(r.Fragment,null,t&&r.createElement(j.a,null,"Removing user..."),n&&r.createElement(j.j,null,"Failed to remove user"),s&&r.createElement(j.a,null,"Adding user..."),i&&r.createElement(j.j,null,"Failed to add user"))}var P=(0,s.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return b(b({},e),{},{isLoading:!0,hasLoaded:!0});case d:return b(b({},e),{},{isLoading:!1,users:t.users});case f:return b(b({},e),{},{isLoading:!1,error:!0});case m:return b(b({},e),{},{isAdding:!0,errorAdding:!1});case p:return b(b({},e),{},{isAdding:!1,users:[].concat(c()(e.users),[t.user])});case h:return b(b({},e),{},{isAdding:!1,errorAdding:!0});case E:return b(b({},e),{},{isRemoving:!0,errorRemoving:!1});case g:return b(b({},e),{},{users:e.users.filter((function(e){return e.id!==t.user.id})),isRemoving:!1});case v:return b(b({},e),{},{isRemoving:!1,errorRemoving:!0});default:return e}}));function q(){return(0,U.tc)("UserListWrapper"),r.createElement(u.Provider,{store:P},r.createElement(x,null),r.createElement(k,null),r.createElement(L,null))}var D=n(6406),N=n(5049),C=n(1162),T=n(5943),I=n(1830);function Z(){return r.createElement(r.Fragment,null,r.createElement(N.H1,null,"Redux"),r.createElement(w._,null,r.createElement(T.Ou,{text:"actions.js",fileName:"components/redux/actions.js"}),r.createElement(T.Ou,{text:"reducer.js",fileName:"components/redux/reducer.js"}),r.createElement(T.Ou,{text:"UsersWrapper.js",fileName:"components/redux/UsersWrapper.js"}),r.createElement(T.Ou,{text:"UserList.js",fileName:"components/redux/UserList.js"}),r.createElement(T.Ou,{text:"UserInput.js",fileName:"components/redux/UserInput.js"}),r.createElement(T.Ou,{text:"UserItem.js",fileName:"components/redux/UserItem.js"}),r.createElement(T.Ou,{text:"UserIndicators.js",fileName:"components/redux/UserIndicators.js"})),r.createElement(C.Z,null,r.createElement(q,null)),r.createElement(I.E,null,r.createElement(D.Z,null),r.createElement(_.Tt,null)))}}}]);