(self.webpackChunkstate_mgmt_examples=self.webpackChunkstate_mgmt_examples||[]).push([[965],{7025:function(e,t,r){"use strict";r.d(t,{Tt:function(){return S},ZP:function(){return b},Rf:function(){return O}});var n=r(7757),s=r.n(n),u=r(8926),c=r.n(u),i=r(4575),o=r.n(i),a=r(3913),l=r.n(a),f=r(9713),p=r.n(f),d=r(8903),m=r(7746),g=r.n(m),h=function(){function e(){var t=this;o()(this,e),p()(this,"requests",[]),p()(this,"subscribers",[]),p()(this,"getUsers",(function(){return t._fetch("/users")})),p()(this,"addUser",function(){var e=c()(s().mark((function e(r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.addRequest("POST /users"),e.next=3,(0,d.gw)(2e3);case 3:return t.addRequest("OK /users"),e.abrupt("return",{name:r,id:(0,d.EL)()});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),p()(this,"removeUser",function(){var e=c()(s().mark((function e(r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.addRequest("DELETE /users/".concat(r.id)),e.next=3,(0,d.gw)(2e3);case 3:t.addRequest("OK /users/".concat(r.id));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),p()(this,"clearRequests",(function(){t.requests=[],t.notifySubscribers()}))}var t,r;return l()(e,[{key:"_fetch",value:(r=c()(s().mark((function e(t){var r,n,u,i=this,o=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},n=r.delayMs,u=t.replace(this.baseUrl,""),this.addRequest("GET ".concat(u)),e.abrupt("return",this._mockFetch(t).then((function(e){if(!e.ok)throw new Error("Request to ".concat(t," failed with HTTP").concat(e.status));return e})).then((function(e){return e.json()})).then(function(){var e=c()(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.gw)(n||2e3);case 2:return i.addRequest("OK ".concat(u)),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"subscribe",value:function(e){this.subscribers.push(e),e(this.reqests)}},{key:"unSubscribe",value:function(e){this.subscribers=this.subscribers.filter((function(t){return t!==e}))}},{key:"addRequest",value:function(e){this.requests.push(e),this.notifySubscribers()}},{key:"notifySubscribers",value:function(){var e=this;this.subscribers.forEach((function(t){return t(e.requests)}))}},{key:"_mockFetch",value:(t=c()(s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g()[t],e.abrupt("return",{ok:!!r,status:r?200:404,json:function(){return new Promise((function(e){return e(r)}))}});case 2:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}(),y=new h,b=y,O=y.getUsers,v=r(3038),R=r.n(v),E=r(7294),j=r(9434),w=r(5973),P=$RefreshSig$();function S(){P();var e=(0,E.useReducer)((function(e){return e+1}),0),t=R()(e,2)[1];(0,E.useEffect)((function(){return b.subscribe(t),function(){b.unSubscribe(t),b.clearRequests()}}),[]);var r=b.requests.length,n=r>10?r-10:0;return E.createElement("section",null,E.createElement(j.H3,{onClick:b.clearRequests,style:{cursor:"pointer"}},"API requests, click to reset"),E.createElement(w.a,null,r>10&&E.createElement(w.H,null,"..."),b.requests.slice(n).map((function(e,t){return E.createElement(w.H,{key:t},e)}))))}P(S,"UxqsAPbyOOo6jkpO1hjMpCydUI8="),$RefreshReg$(S,"ApiRequests")},7746:function(e){e.exports={"/users":[{id:1,name:"John Doe"},{id:2,name:"Jane Doe"}]}},3225:function(e,t,r){"use strict";r.d(t,{E:function(){return u}});var n=r(9163),s=r(9630),u=n.ZP.div.withConfig({displayName:"Containers__FlexContainer",componentId:"osdxjy-0"})(["display:flex;& > * + *{margin-left:5rem;border-left:1px dashed ",";padding-left:2rem;}"],s.A2)},6722:function(e,t,r){"use strict";r.d(t,{Z:function(){return g}});var n,s,u=r(7154),c=r.n(u),i=r(3038),o=r.n(i),a=r(6479),l=r.n(a),f=r(7294),p=r(9163),d=$RefreshSig$(),m=p.ZP.input.withConfig({displayName:"Input__StyledInput",componentId:"tgycnj-0"})(["margin-right:1rem;&[disabled]{text-decoration:line-through;}"]);function g(e){d();var t=e.children,r=e.disabled,n=l()(e,["children","disabled"]),s=(0,f.useState)(""),u=o()(s,2),i=u[0],a=u[1];return(0,f.useEffect)((function(){!r&&a("")}),[r]),f.createElement("div",null,f.createElement(m,c()({type:"text",disabled:r,value:i,onChange:function(e){return a(e.target.value)}},n)),t(i))}n=m,d(g,"aFIykL0K1j3we4veeaDstLdSuC8="),s=g,$RefreshReg$(n,"StyledInput"),$RefreshReg$(s,"Input")},448:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(3038),s=r.n(n),u=r(7294),c=r(9693),i=$RefreshSig$();function o(e){i();var t=e.initiallyMounted,r=e.children,n=(0,u.useReducer)((function(e){return!e}),!!t),o=s()(n,2),a=o[0],l=o[1];return u.createElement(u.Fragment,null,u.createElement(c.Z,{onClick:l},a?"Unmount":"Mount"),a&&r)}i(o,"SGBRyZ8qj4KP74qoZGVxnnGCTRI="),$RefreshReg$(o,"MountToggle")},8903:function(e,t,r){"use strict";r.d(t,{gw:function(){return n},EL:function(){return u},ZT:function(){return c}});var n=function(e){return new Promise((function(t){return setTimeout(t,e)}))},s=10,u=function(){return s++},c=function(){}},9965:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return se}});var n=r(7294),s=r(9273),u=r(9713),c=r.n(u),i=r(3038),o=r.n(i),a=r(319),l=r.n(a);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d={type:"ON_LOAD"},m={type:"ON_SUCCESS"},g={type:"ON_ERROR"},h={type:"ON_ADD_START"},y={type:"ON_ADD_SUCCESS"},b={type:"ON_ADD_ERROR"},O={type:"ON_REMOVE_START"},v={type:"ON_REMOVE_SUCCESS"},R={type:"ON_REMOVE_ERROR"};function E(e,t){switch(t.type){case d.type:return p(p({},e),{},{isLoading:!0,hasLoaded:!0});case m.type:return p(p({},e),{},{isLoading:!1,users:t.users});case g.type:return p(p({},e),{},{isLoading:!1,error:!0});case h.type:return p(p({},e),{},{isAdding:!0,errorAdding:!1});case y.type:return p(p({},e),{},{isAdding:!1,users:[].concat(l()(e.users),[t.user])});case b.type:return p(p({},e),{},{isAdding:!1,errorAdding:!0});case O.type:return p(p({},e),{},{isRemoving:!0,errorRemoving:!1});case v.type:return p(p({},e),{},{users:e.users.filter((function(e){return e.id!==t.user.id})),isRemoving:!1});case R:return p(p({},e),{},{isRemoving:!1,errorRemoving:!0});default:return e}}var j=(0,s.cn)({key:"Users",default:{users:[],isLoading:!1,hasLoaded:!1,error:!1,isAdding:!1,errorAdding:!1,isRemoving:!1,errorRemoving:!1}}),w=r(5973),P=r(4494),S=r(7025),k=$RefreshSig$();function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var A,D,_=(0,s.nZ)({key:"userRemove",set:function(e,t){(0,e.set)(j,(function(e){return E(e,t)}))}}),x=D=k(n.memo(A=k((function(e){k();var t=e.name,r=e.id;(0,P.tc)("UserItem: (".concat(t,")"));var u=(0,s.Zl)(_);return n.createElement(w.H,{onRemove:function(){return e={id:r},u(O),void S.ZP.removeUser(e).then((function(){return u($($({},v),{},{user:e}))})).catch((function(){return u(R)}));var e}},t)}),"Y1o4PaP5Hq7Uo0rHRHQNas5X6PE=",!1,(function(){return[P.tc,s.Zl]}))),"Y1o4PaP5Hq7Uo0rHRHQNas5X6PE=",!1,(function(){return[P.tc,s.Zl]}));$RefreshReg$(A,"%default%$React.memo"),$RefreshReg$(D,"%default%");var q=r(2614),Z=$RefreshSig$();function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var I=(0,s.nZ)({key:"usersQuery",get:function(e){var t=(0,e.get)(j),r=t.users,n=t.isLoading,s=t.hasLoaded;return{users:r,isLoading:n,shouldFetch:!n&&!s,error:t.error}},set:function(e,t){(0,e.set)(j,(function(e){return E(e,t)}))}});function N(){Z(),(0,P.tc)("UserList");var e=(0,s.FV)(I),t=o()(e,2),r=t[0],u=t[1],c=r.users,i=r.isLoading,a=r.shouldFetch,l=r.error;return(0,n.useEffect)((function(){a&&(u(d),S.ZP.getUsers().then((function(e){return u(C(C({},m),{},{users:e}))})).catch((function(){return u(g)})))}),[a,u]),i?n.createElement(q.a,null):l?n.createElement(q.j,null):n.createElement(w.a,null,c.map((function(e){return n.createElement(x,{key:e.id,id:e.id,name:e.name})})))}Z(N,"Kf0v3rk1+94DY8YamR0rYufcVKs=",!1,(function(){return[P.tc,s.FV]})),$RefreshReg$(N,"UserList");var F=r(9693),T=r(6722),H=$RefreshSig$();function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var J=(0,s.nZ)({key:"UsersAdd",get:function(e){return(0,e.get)(j).isAdding},set:function(e,t){(0,e.set)(j,(function(e){return E(e,t)}))}});function K(){H(),(0,P.tc)("UserInput");var e=(0,s.FV)(J),t=o()(e,2),r=t[0],u=t[1];return n.createElement(T.Z,{disabled:r},(function(e){return n.createElement(F.Z,{disabled:r,onClick:function(){return function(e){u(h),S.ZP.addUser(e).then((function(e){return u(M(M({},y),{},{user:e}))})).catch((function(){return u(b)}))}(e)}},"Add user")}))}H(K,"1TpXmlCEteQWx6tmXd6oJ97EBkU=",!1,(function(){return[P.tc,s.FV]})),$RefreshReg$(K,"UserInput");var W=$RefreshSig$(),Q=(0,s.nZ)({key:"userMutations",get:function(e){var t=(0,e.get)(j);return{isRemoving:t.isRemoving,errorRemoving:t.errorRemoving,isAdding:t.isAdding,errorAdding:t.errorAdding}}});function X(){W(),(0,P.tc)("UserIndicators");var e=(0,s.sJ)(Q),t=e.isRemoving,r=e.errorRemoving,u=e.isAdding,c=e.errorAdding;return n.createElement(n.Fragment,null,t&&n.createElement(q.a,null,"Removing user..."),r&&n.createElement(q.j,null,"Failed to remove user"),u&&n.createElement(q.a,null,"Adding user..."),c&&n.createElement(q.j,null,"Failed to add user"))}W(X,"aSiXiRrHarTFaZymRH/73mFdOro=",!1,(function(){return[P.tc,s.sJ]})),$RefreshReg$(X,"UserIndicators");var Y=$RefreshSig$(),G=console.error;function z(){return Y(),(0,P.tc)("UserListWrapper"),n.createElement(s.Wh,null,n.createElement(N,null),n.createElement(K,null),n.createElement(X,null))}console.error=function(e){if(!/Cannot update a component/.test(e)){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return G.apply(void 0,[e].concat(r))}},Y(z,"1tajz0682eLN0aQrzvJO/S9cJ4U=",!1,(function(){return[P.tc]})),$RefreshReg$(z,"UsersWrapper");var B=r(5376),ee=r(9434),te=r(448),re=r(9268),ne=r(3225);function se(){return n.createElement(n.Fragment,null,n.createElement(ee.H1,null,"Recoil"),n.createElement(F._,null,n.createElement(re.Ou,{text:"UserState.js",fileName:"components/recoil/UserState.js"}),n.createElement(re.Ou,{text:"UsersWrapper.js",fileName:"components/recoil/UsersWrapper.js"}),n.createElement(re.Ou,{text:"UserList.js",fileName:"components/recoil/UserList.js"}),n.createElement(re.Ou,{text:"UserInput.js",fileName:"components/recoil/UserInput.js"}),n.createElement(re.Ou,{text:"UserIndicators.js",fileName:"components/recoil/UserIndicators.js"})),n.createElement(te.Z,null,n.createElement(z,null)),n.createElement(ee.A,null,"Having all the state in a single atom causes all selector subscribers to rerender on state change."," ",n.createElement("a",{href:"https://github.com/facebookexperimental/Recoil/issues/139"},"Issues #139")),n.createElement(ne.E,null,n.createElement(B.Z,null),n.createElement(S.Tt,null)))}$RefreshReg$(se,"RecoilView")}}]);