(self.webpackChunkstate_mgmt_examples=self.webpackChunkstate_mgmt_examples||[]).push([[519],{2108:function(e,t,r){"use strict";r.d(t,{Tt:function(){return L},ZP:function(){return y},Rf:function(){return v}});var n=r(7757),i=r.n(n),o=r(8926),s=r.n(o),u=r(4575),a=r.n(u),c=r(3913),l=r.n(c),d=r(9713),p=r.n(d),f=r(6967),m=r(7808),h=r.n(m),g=function(){function e(){var t=this;a()(this,e),p()(this,"requests",[]),p()(this,"subscribers",[]),p()(this,"getUsers",(function(){return t._fetch("/users")})),p()(this,"addUser",function(){var e=s()(i().mark((function e(r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.addRequest("POST /users"),e.next=3,(0,f.gw)(2e3);case 3:return t.addRequest("OK /users"),e.abrupt("return",{name:r,id:(0,f.EL)()});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),p()(this,"removeUser",function(){var e=s()(i().mark((function e(r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.addRequest("DELETE /users/".concat(r.id)),e.next=3,(0,f.gw)(2e3);case 3:t.addRequest("OK /users/".concat(r.id));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),p()(this,"clearRequests",(function(){t.requests=[],t.notifySubscribers()}))}var t,r;return l()(e,[{key:"_fetch",value:(r=s()(i().mark((function e(t){var r,n,o,u=this,a=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},n=r.delayMs,o=t.replace(this.baseUrl,""),this.addRequest("GET ".concat(o)),e.abrupt("return",this._mockFetch(t).then((function(e){if(!e.ok)throw new Error("Request to ".concat(t," failed with HTTP").concat(e.status));return e})).then((function(e){return e.json()})).then(function(){var e=s()(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.gw)(n||2e3);case 2:return u.addRequest("OK ".concat(o)),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"subscribe",value:function(e){this.subscribers.push(e),e(this.reqests)}},{key:"unSubscribe",value:function(e){this.subscribers=this.subscribers.filter((function(t){return t!==e}))}},{key:"addRequest",value:function(e){this.requests.push(e),this.notifySubscribers()}},{key:"notifySubscribers",value:function(){var e=this;this.subscribers.forEach((function(t){return t(e.requests)}))}},{key:"_mockFetch",value:(t=s()(i().mark((function e(t){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h()[t],e.abrupt("return",{ok:!!r,status:r?200:404,json:function(){return new Promise((function(e){return e(r)}))}});case 2:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}(),b=new g,y=b,v=b.getUsers,E=r(3038),w=r.n(E),O=r(7294),x=r(5049),k=r(3520);function L(){var e=(0,O.useReducer)((function(e){return e+1}),0),t=w()(e,2)[1];(0,O.useEffect)((function(){return y.subscribe(t),function(){y.unSubscribe(t),y.clearRequests()}}),[]);var r=y.requests.length,n=r>10?r-10:0;return O.createElement("section",null,O.createElement(x.H3,{onClick:y.clearRequests,style:{cursor:"pointer"}},"API requests, click to reset"),O.createElement(k.a,null,r>10&&O.createElement(k.H,null,"..."),y.requests.slice(n).map((function(e,t){return O.createElement(k.H,{key:t},e)}))))}},7808:function(e){e.exports={"/users":[{id:1,name:"John Doe"},{id:2,name:"Jane Doe"}]}},1830:function(e,t,r){"use strict";r.d(t,{E:function(){return o}});var n=r(9163),i=r(9848),o=n.ZP.div.withConfig({displayName:"Containers__FlexContainer",componentId:"osdxjy-0"})(["display:flex;& > * + *{margin-left:5rem;border-left:1px dashed ",";padding-left:2rem;}"],i.A2)},3242:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var n=r(7154),i=r.n(n),o=r(3038),s=r.n(o),u=r(6479),a=r.n(u),c=r(7294),l=r(9163).ZP.input.withConfig({displayName:"Input__StyledInput",componentId:"tgycnj-0"})(["margin-right:1rem;&[disabled]{text-decoration:line-through;}"]);function d(e){var t=e.children,r=e.disabled,n=a()(e,["children","disabled"]),o=(0,c.useState)(""),u=s()(o,2),d=u[0],p=u[1];return(0,c.useEffect)((function(){!r&&p("")}),[r]),c.createElement("div",null,c.createElement(l,i()({type:"text",disabled:r,value:d,onChange:function(e){return p(e.target.value)}},n)),t(d))}},1162:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var n=r(3038),i=r.n(n),o=r(7294),s=r(5109);function u(e){var t=e.initiallyMounted,r=e.children,n=(0,o.useReducer)((function(e){return!e}),!!t),u=i()(n,2),a=u[0],c=u[1];return o.createElement(o.Fragment,null,o.createElement(s.Z,{onClick:c},a?"Unmount":"Mount"),a&&r)}},6967:function(e,t,r){"use strict";r.d(t,{gw:function(){return n},EL:function(){return o},ZT:function(){return s}});var n=function(e){return new Promise((function(t){return setTimeout(t,e)}))},i=10,o=function(){return i++},s=function(){}},6519:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return W}});var n,i,o,s,u,a,c,l,d,p,f=r(7294),m=r(2141),h=r(1165),g=r.n(h),b=r(4575),y=r.n(b),v=r(3913),E=r.n(v),w=(r(9713),r(3124)),O=r.n(w),x=(r(7268),r(2188)),k=(p=function(){function e(){y()(this,e),g()(this,"users",i,this),g()(this,"isLoading",o,this),g()(this,"hasLoaded",s,this),g()(this,"error",u,this),g()(this,"isAdding",a,this),g()(this,"addingError",c,this),g()(this,"isRemoving",l,this),g()(this,"removingError",d,this)}return E()(e,[{key:"setUsers",value:function(e){this.users=e,this.isLoading=!1,this.hasLoaded=!0}},{key:"setLoading",value:function(){this.isLoading=!0}},{key:"setLoadingError",value:function(){this.error=!0,this.isLoading=!1,this.hasLoaded=!0}},{key:"add",value:function(e){this.users.push(e),this.isAdding=!1}},{key:"setAdding",value:function(){this.isAdding=!0}},{key:"setAddingError",value:function(){this.addingError=!0,this.isAdding=!1}},{key:"remove",value:function(e){this.users=this.users.filter((function(t){return t.id!==e.id})),this.isRemoving=!1}},{key:"setRemoving",value:function(){this.isRemoving=!0}},{key:"setRemovingError",value:function(){this.removingError=!0,this.isRemoving=!1}}]),e}(),n=p,i=O()(n.prototype,"users",[x.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o=O()(n.prototype,"isLoading",[x.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=O()(n.prototype,"hasLoaded",[x.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=O()(n.prototype,"error",[x.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),O()(n.prototype,"setUsers",[x.aD],Object.getOwnPropertyDescriptor(n.prototype,"setUsers"),n.prototype),O()(n.prototype,"setLoading",[x.aD],Object.getOwnPropertyDescriptor(n.prototype,"setLoading"),n.prototype),O()(n.prototype,"setLoadingError",[x.aD],Object.getOwnPropertyDescriptor(n.prototype,"setLoadingError"),n.prototype),a=O()(n.prototype,"isAdding",[x.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=O()(n.prototype,"addingError",[x.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),O()(n.prototype,"add",[x.aD],Object.getOwnPropertyDescriptor(n.prototype,"add"),n.prototype),O()(n.prototype,"setAdding",[x.aD],Object.getOwnPropertyDescriptor(n.prototype,"setAdding"),n.prototype),O()(n.prototype,"setAddingError",[x.aD],Object.getOwnPropertyDescriptor(n.prototype,"setAddingError"),n.prototype),l=O()(n.prototype,"isRemoving",[x.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=O()(n.prototype,"removingError",[x.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),O()(n.prototype,"remove",[x.aD],Object.getOwnPropertyDescriptor(n.prototype,"remove"),n.prototype),O()(n.prototype,"setRemoving",[x.aD],Object.getOwnPropertyDescriptor(n.prototype,"setRemoving"),n.prototype),O()(n.prototype,"setRemovingError",[x.aD],Object.getOwnPropertyDescriptor(n.prototype,"setRemovingError"),n.prototype),n),L=(0,f.createContext)(null),U=function(e){var t=e.children,r=(0,m.hN)((function(){return new k}));return f.createElement(L.Provider,{value:r},t)},j=L,R=r(9323),P=function(){return(0,f.useContext)(j)},A=r(3520),D=r(3082),q=r(2108),C=f.memo((function(e){var t=e.name,r=e.id;(0,D.tc)("UserItem: ".concat(t));var n=P();return f.createElement(A.H,{onRemove:function(){n.setRemoving(),q.ZP.removeUser({name:t,id:r}).then((function(){return n.remove({name:t,id:r})})).catch((function(){return n.setAddingError()}))}},t)})),S=r(2938),Z=(0,R.Pi)((function(){(0,D.tc)("UserList");var e=P(),t=e.users,r=e.isLoading,n=e.hasLoaded,i=e.error;return(0,f.useEffect)((function(){e.setLoading(),q.ZP.getUsers().then((function(t){return e.setUsers(t)})).catch((function(){return e.setLoadingError()}))}),[e]),r||!n?f.createElement(S.a,null):i?f.createElement(S.j,null):f.createElement(A.a,null,t.map((function(e){return f.createElement(C,{key:e.id,id:e.id,name:e.name})})))})),_=(0,R.Pi)((function(){(0,D.tc)("UserIndicators");var e=P(),t=e.isRemoving,r=e.errorRemoving,n=e.isAdding,i=e.errorAdding;return f.createElement(f.Fragment,null,t&&f.createElement(S.a,null,"Removing user..."),r&&f.createElement(S.j,null,"Failed to remove user"),n&&f.createElement(S.a,null,"Adding user..."),i&&f.createElement(S.j,null,"Failed to add user"))})),I=r(5109),N=r(3242),T=(0,R.Pi)((function(){(0,D.tc)("UserInput");var e=P();return f.createElement(N.Z,{disabled:e.isAdding},(function(t){return f.createElement(I.Z,{disabled:e.isAdding,onClick:function(){return function(t){e.setAdding(),q.ZP.addUser(t).then((function(t){return e.add(t)})).catch((function(){return e.setAddingError()}))}(t)}},"Add user")}))}));function z(){return f.createElement(U,null,f.createElement(Z,null),f.createElement(_,null),f.createElement(T,null))}var F=r(6406),H=r(5049),M=r(1162),K=r(5943),J=r(1830);function W(){return f.createElement(f.Fragment,null,f.createElement(H.H1,null,"Mobx"),f.createElement(I._,null,f.createElement(K.Ou,{text:"UserStore.js",fileName:"components/mobx/UserStore.js"}),f.createElement(K.Ou,{text:"UserStoreContext.js",fileName:"components/mobx/UserStoreContext.js"}),f.createElement(K.Ou,{text:"useUserStore.js",fileName:"components/mobx/useUserStore.js"}),f.createElement(K.Ou,{text:"UsersWrapper.js",fileName:"components/mobx/UsersWrapper.js"}),f.createElement(K.Ou,{text:"UserList.js",fileName:"components/mobx/UserList.js"}),f.createElement(K.Ou,{text:"UserItem.js",fileName:"components/mobx/UserItem.js"}),f.createElement(K.Ou,{text:"UserIndicators.js",fileName:"components/mobx/UserIndicators.js"})),f.createElement(M.Z,null,f.createElement(z,null)),f.createElement(J.E,null,f.createElement(F.Z,null),f.createElement(q.Tt,null)))}}}]);