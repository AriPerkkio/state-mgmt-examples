(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{275:function(e,t,n){"use strict";n.d(t,"b",(function(){return E})),n.d(t,"a",(function(){return _}));var r=n(282),u=n.n(r),a=n(284),s=n.n(a),c=n(36),i=n.n(c),o=n(37),l=n.n(o),d=n(7),f=n.n(d),m=n(277),p=n(278),b=n.n(p),E=new(function(){function e(){var t=this;i()(this,e),f()(this,"requests",[]),f()(this,"subscribers",[]),f()(this,"getUsers",(function(){return t._fetch("/users")})),f()(this,"addUser",function(){var e=s()(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.addRequest("POST /users"),e.next=3,Object(m.a)(2e3);case 3:return t.addRequest("OK /users"),e.abrupt("return",{name:n,id:Object(m.c)()});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),f()(this,"removeUser",function(){var e=s()(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.addRequest("DELETE /users/".concat(n.id)),e.next=3,Object(m.a)(2e3);case 3:t.addRequest("OK /users/".concat(n.id));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),f()(this,"clearRequests",(function(){t.requests=[],t.notifySubscribers()}))}var t,n;return l()(e,[{key:"_fetch",value:(n=s()(u.a.mark((function e(t){var n,r,a,c=this,i=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},r=n.delayMs,a=t.replace(this.baseUrl,""),this.addRequest("GET ".concat(a)),e.abrupt("return",this._mockFetch(t).then((function(e){if(!e.ok)throw new Error("Request to ".concat(t," failed with HTTP").concat(e.status));return e})).then((function(e){return e.json()})).then(function(){var e=s()(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.a)(r||2e3);case 2:return c.addRequest("OK ".concat(a)),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"subscribe",value:function(e){this.subscribers.push(e),e(this.reqests)}},{key:"unSubscribe",value:function(e){this.subscribers=this.subscribers.filter((function(t){return t!==e}))}},{key:"addRequest",value:function(e){this.requests.push(e),this.notifySubscribers()}},{key:"notifySubscribers",value:function(){var e=this;this.subscribers.forEach((function(t){return t(e.requests)}))}},{key:"_mockFetch",value:(t=s()(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=b.a[t],e.abrupt("return",{ok:!!n,status:n?200:404,json:function(){return new Promise((function(e){return e(n)}))}});case 2:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}()),h=n(2),O=n.n(h),R=n(0),v=n.n(R),g=n(34),S=n(17);function _(){var e=Object(R.useReducer)((function(e){return e+1}),0),t=O()(e,2)[1];Object(R.useEffect)((function(){return E.subscribe(t),function(){E.unSubscribe(t),E.clearRequests()}}),[]);var n=E.requests.length,r=n>10?n-10:0;return v.a.createElement("section",null,v.a.createElement(g.d,{onClick:E.clearRequests,style:{cursor:"pointer"}},"API requests, click to reset"),v.a.createElement(S.a,null,n>10&&v.a.createElement(S.b,null,"..."),E.requests.slice(r).map((function(e,t){return v.a.createElement(S.b,{key:t},e)}))))}},277:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return s}));var r=function(e){return new Promise((function(t){return setTimeout(t,e)}))},u=10,a=function(){return u++},s=function(){}},278:function(e,t){e.exports={"/users":[{id:1,name:"John Doe"},{id:2,name:"Jane Doe"}]}},279:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3),u=n(4),a=r.a.div.withConfig({displayName:"Containers__FlexContainer",componentId:"osdxjy-0"})(["display:flex;& > * + *{margin-left:5rem;border-left:1px dashed ",";padding-left:2rem;}"],u.c)},280:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(2),u=n.n(r),a=n(0),s=n.n(a),c=n(16);function i(e){var t=e.initiallyMounted,n=e.children,r=Object(a.useReducer)((function(e){return!e}),!!t),i=u()(r,2),o=i[0],l=i[1];return s.a.createElement(s.a.Fragment,null,s.a.createElement(c.b,{onClick:l},o?"Unmount":"Mount"),o&&n)}},281:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(6),u=n.n(r),a=n(2),s=n.n(a),c=n(8),i=n.n(c),o=n(0),l=n.n(o),d=n(3).a.input.withConfig({displayName:"Input__StyledInput",componentId:"tgycnj-0"})(["margin-right:1rem;&[disabled]{text-decoration:line-through;}"]);function f(e){var t=e.children,n=e.disabled,r=i()(e,["children","disabled"]),a=Object(o.useState)(""),c=s()(a,2),f=c[0],m=c[1];return Object(o.useEffect)((function(){!n&&m("")}),[n]),l.a.createElement("div",null,l.a.createElement(d,u()({type:"text",disabled:n,value:f,onChange:function(e){return m(e.target.value)}},r)),t(f))}},326:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return C}));var r=n(0),u=n.n(r),a=n(283),s=n(293);function c(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(u){return"function"==typeof u?u(n,r,e):t(u)}}}}var i=c();i.withExtraArgument=c;var o=i,l=n(39),d=n.n(l),f=n(7),m=n.n(f),p=n(275);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h={users:[],isLoading:!1,hasLoaded:!1,error:!1,isAdding:!1,errorAdding:!1,isRemoving:!1,errorRemoving:!1};var O=n(17),R=n(33),v=u.a.memo((function(e){var t=e.name,n=e.id;Object(R.b)("UserItem: ".concat(t));var r=Object(a.useDispatch)();return u.a.createElement(O.b,{onRemove:function(){var e;r((e={name:t,id:n},function(t){t({type:"ON_USER_REMOVE_START"}),p.b.removeUser(e).then((function(){return t({type:"ON_USER_REMOVE_SUCCESS",user:e})})).catch((function(){return t({type:"ON_USER_REMOVE_ERROR"})}))}))}},t)})),g=n(35);var S=Object(a.connect)((function(e){return{users:e.users,isLoading:e.isLoading,shouldFetch:!e.isLoading&&!e.hasLoaded,error:e.error}}),(function(e){return{loadUsers:function(){return e((function(e){e({type:"ON_USERS_LOAD_START"}),p.b.getUsers().then((function(t){return e({type:"ON_USERS_LOAD_SUCCESS",users:t})})).catch((function(){return e({type:"ON_USERS_LOAD_ERROR"})}))}))}}}))((function(e){var t=e.users,n=e.isLoading,a=e.shouldFetch,s=e.error,c=e.loadUsers;return Object(R.b)("UserList"),Object(r.useEffect)((function(){a&&c()}),[a,c]),n||a?u.a.createElement(g.b,null):s?u.a.createElement(g.a,null):u.a.createElement(O.a,null,t.map((function(e){return u.a.createElement(v,{key:e.id,id:e.id,name:e.name})})))})),_=n(16),j=n(281);function y(){Object(R.b)("UserInput");var e=Object(a.useSelector)((function(e){return e.isAdding})),t=Object(a.useDispatch)(),n=function(e){t(function(e){return function(t){t({type:"ON_USER_ADD_START"}),p.b.addUser(e).then((function(e){return t({type:"ON_USER_ADD_SUCCESS",user:e})})).catch((function(){return t({type:"ON_USER_ADD_ERROR"})}))}}(e))};return u.a.createElement(j.a,{disabled:e},(function(t){return u.a.createElement(_.b,{disabled:e,onClick:function(){return n(t)}},"Add user")}))}function U(){Object(R.b)("UserIndicators");var e=Object(a.useSelector)((function(e){return{isRemoving:e.isRemoving,errorRemoving:e.errorRemoving,isAdding:e.isAdding,errorAdding:e.errorAdding}})),t=e.isRemoving,n=e.errorRemoving,r=e.isAdding,s=e.errorAdding;return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(g.b,null,"Removing user..."),n&&u.a.createElement(g.a,null,"Failed to remove user"),r&&u.a.createElement(g.b,null,"Adding user..."),s&&u.a.createElement(g.a,null,"Failed to add user"))}var A=Object(s.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ON_USERS_LOAD_START":return E(E({},e),{},{isLoading:!0,hasLoaded:!0});case"ON_USERS_LOAD_SUCCESS":return E(E({},e),{},{isLoading:!1,users:t.users});case"ON_USERS_LOAD_ERROR":return E(E({},e),{},{isLoading:!1,error:!0});case"ON_USER_ADD_START":return E(E({},e),{},{isAdding:!0,errorAdding:!1});case"ON_USER_ADD_SUCCESS":return E(E({},e),{},{isAdding:!1,users:[].concat(d()(e.users),[t.user])});case"ON_USER_ADD_ERROR":return E(E({},e),{},{isAdding:!1,errorAdding:!0});case"ON_USER_REMOVE_START":return E(E({},e),{},{isRemoving:!0,errorRemoving:!1});case"ON_USER_REMOVE_SUCCESS":return E(E({},e),{},{users:e.users.filter((function(e){return e.id!==t.user.id})),isRemoving:!1});case"ON_USER_REMOVE_ERROR":return E(E({},e),{},{isRemoving:!1,errorRemoving:!0});default:return e}}),Object(s.applyMiddleware)(o));function w(){return Object(R.b)("UserListWrapper"),u.a.createElement(a.Provider,{store:A},u.a.createElement(S,null),u.a.createElement(y,null),u.a.createElement(U,null))}var k=n(38),x=n(34),D=n(280),N=n(21),L=n(279);function C(){return u.a.createElement(u.a.Fragment,null,u.a.createElement(x.b,null,"Redux Thunk"),u.a.createElement(_.a,null,u.a.createElement(N.a,{text:"actions.js",fileName:"components/redux-thunk/actions.js"}),u.a.createElement(N.a,{text:"reducer.js",fileName:"components/redux-thunk/reducer.js"}),u.a.createElement(N.a,{text:"UsersWrapper.js",fileName:"components/redux-thunk/UsersWrapper.js"}),u.a.createElement(N.a,{text:"UserList.js",fileName:"components/redux-thunk/UserList.js"}),u.a.createElement(N.a,{text:"UserInput.js",fileName:"components/redux-thunk/UserInput.js"}),u.a.createElement(N.a,{text:"UserItem.js",fileName:"components/redux-thunk/UserItem.js"}),u.a.createElement(N.a,{text:"UserIndicators.js",fileName:"components/redux-thunk/UserIndicators.js"})),u.a.createElement(D.a,null,u.a.createElement(w,null)),u.a.createElement(L.a,null,u.a.createElement(k.b,null),u.a.createElement(p.a,null)))}}}]);