(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{273:function(e,t,r){"use strict";r.d(t,"b",(function(){return O})),r.d(t,"a",(function(){return w}));var n=r(275),c=r.n(n),u=r(277),s=r.n(u),a=r(35),i=r.n(a),o=r(36),l=r.n(o),f=r(6),d=r.n(f),p=r(274),b=r(278),m=r.n(b),O=new(function(){function e(){var t=this;i()(this,e),d()(this,"requests",[]),d()(this,"subscribers",[]),d()(this,"getUsers",(function(){return t._fetch("/users")})),d()(this,"addUser",function(){var e=s()(c.a.mark((function e(r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.addRequest("POST /users"),e.next=3,Object(p.a)(2e3);case 3:return t.addRequest("OK /users"),e.abrupt("return",{name:r,id:Object(p.c)()});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),d()(this,"removeUser",function(){var e=s()(c.a.mark((function e(r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.addRequest("DELETE /users/".concat(r.id)),e.next=3,Object(p.a)(2e3);case 3:t.addRequest("OK /users/".concat(r.id));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),d()(this,"clearRequests",(function(){t.requests=[],t.notifySubscribers()}))}var t,r;return l()(e,[{key:"_fetch",value:(r=s()(c.a.mark((function e(t){var r,n,u,a=this,i=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:{},n=r.delayMs,u=t.replace(this.baseUrl,""),this.addRequest("GET ".concat(u)),e.abrupt("return",this._mockFetch(t).then((function(e){if(!e.ok)throw new Error("Request to ".concat(t," failed with HTTP").concat(e.status));return e})).then((function(e){return e.json()})).then(function(){var e=s()(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.a)(n||2e3);case 2:return a.addRequest("OK ".concat(u)),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"subscribe",value:function(e){this.subscribers.push(e),e(this.reqests)}},{key:"unSubscribe",value:function(e){this.subscribers=this.subscribers.filter((function(t){return t!==e}))}},{key:"addRequest",value:function(e){this.requests.push(e),this.notifySubscribers()}},{key:"notifySubscribers",value:function(){var e=this;this.subscribers.forEach((function(t){return t(e.requests)}))}},{key:"_mockFetch",value:(t=s()(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=m.a[t],e.abrupt("return",{ok:!!r,status:r?200:404,json:function(){return new Promise((function(e){return e(r)}))}});case 2:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}()),y=r(1),h=r.n(y),g=r(0),v=r.n(g),j=r(32),E=r(14);function w(){var e=Object(g.useReducer)((function(e){return e+1}),0),t=h()(e,2)[1];Object(g.useEffect)((function(){return O.subscribe(t),function(){return O.unSubscribe(t)}}),[]);var r=O.requests.length,n=r>10?r-10:0;return v.a.createElement("section",null,v.a.createElement(j.d,{onClick:O.clearRequests,style:{cursor:"pointer"}},"API requests, click to reset"),v.a.createElement(E.a,null,r>10&&v.a.createElement(E.b,null,"..."),O.requests.slice(n).map((function(e,t){return v.a.createElement(E.b,{key:t},e)}))))}},274:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"c",(function(){return u})),r.d(t,"b",(function(){return s}));var n=function(e){return new Promise((function(t){return setTimeout(t,e)}))},c=10,u=function(){return c++},s=function(){}},278:function(e,t){e.exports={"/users":[{id:1,name:"John Doe"},{id:2,name:"Jane Doe"}]}},279:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(2),c=r(3),u=n.a.div.withConfig({displayName:"Containers__FlexContainer",componentId:"osdxjy-0"})(["display:flex;& > * + *{margin-left:5rem;border-left:1px dashed ",";padding-left:2rem;}"],c.c)},280:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(1),c=r.n(n),u=r(0),s=r.n(u),a=r(15);function i(e){var t=e.initiallyMounted,r=e.children,n=Object(u.useReducer)((function(e){return!e}),!!t),i=c()(n,2),o=i[0],l=i[1];return s.a.createElement(s.a.Fragment,null,s.a.createElement(a.a,{onClick:l},o?"Unmount":"Mount"),o&&r)}},281:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r(5),c=r.n(n),u=r(1),s=r.n(u),a=r(7),i=r.n(a),o=r(0),l=r.n(o),f=r(2).a.input.withConfig({displayName:"Input__StyledInput",componentId:"tgycnj-0"})(["margin-right:1rem;&[disabled]{text-decoration:line-through;}"]);function d(e){var t=e.children,r=e.disabled,n=i()(e,["children","disabled"]),u=Object(o.useState)(""),a=s()(u,2),d=a[0],p=a[1];return Object(o.useEffect)((function(){!r&&p("")}),[r]),l.a.createElement("div",null,l.a.createElement(f,c()({type:"text",disabled:r,value:d,onChange:function(e){return p(e.target.value)}},n)),t(d))}},288:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return Z}));var n=r(0),c=r.n(n),u=r(282),s=r(6),a=r.n(s),i=r(1),o=r.n(i),l=r(34),f=r.n(l);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b={type:"ON_LOAD"},m={type:"ON_SUCCESS"},O={type:"ON_ERROR"},y={type:"ON_ADD_START"},h={type:"ON_ADD_SUCCESS"},g={type:"ON_ADD_ERROR"},v={type:"ON_REMOVE_START"},j={type:"ON_REMOVE_SUCCESS"},E={type:"ON_REMOVE_ERROR"};function w(e,t){switch(t.type){case b.type:return p(p({},e),{},{isLoading:!0,hasLoaded:!0});case m.type:return p(p({},e),{},{isLoading:!1,users:t.users});case O.type:return p(p({},e),{},{isLoading:!1,error:!0});case y.type:return p(p({},e),{},{isAdding:!0,errorAdding:!1});case h.type:return p(p({},e),{},{isAdding:!1,users:[].concat(f()(e.users),[t.user])});case g.type:return p(p({},e),{},{isAdding:!1,errorAdding:!0});case v.type:return p(p({},e),{},{isRemoving:!0,errorRemoving:!1});case j.type:return p(p({},e),{},{users:e.users.filter((function(e){return e.id!==t.user.id})),isRemoving:!1});case j:return p(p({},e),{},{isRemoving:!1,errorRemoving:!0});default:return e}}var R=Object(u.atom)({key:"Users",default:{users:[],isLoading:!1,hasLoaded:!1,error:!1,isAdding:!1,errorAdding:!1,isRemoving:!1,errorRemoving:!1}}),P=r(14),k=r(31),S=r(273);function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var A=Object(u.selector)({key:"userRemove",set:function(e,t){(0,e.set)(R,(function(e){return w(e,t)}))}});function _(e){var t=e.name,r=e.id;Object(k.b)("UserItem: (".concat(t,")"));var n=Object(u.useSetRecoilState)(A);return c.a.createElement(P.b,{onRemove:function(){return e={id:r},n(v),void S.b.removeUser(e).then((function(){return n(D(D({},j),{},{user:e}))})).catch((function(){return n(E)}));var e}},t)}var x=r(33);function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var N=Object(u.selector)({key:"usersQuery",get:function(e){var t=(0,e.get)(R),r=t.users,n=t.isLoading,c=t.hasLoaded;return{users:r,isLoading:n,shouldFetch:!n&&!c,error:t.error}},set:function(e,t){(0,e.set)(R,(function(e){return w(e,t)}))}});function C(){Object(k.b)("UserList");var e=Object(u.useRecoilState)(N),t=o()(e,2),r=t[0],s=t[1],a=r.users,i=r.isLoading,l=r.shouldFetch,f=r.error;return Object(n.useEffect)((function(){l&&(s(b),S.b.getUsers().then((function(e){return s(L(L({},m),{},{users:e}))})).catch((function(){return s(O)})))}),[l,s]),i?c.a.createElement(x.b,null):f?c.a.createElement(x.a,null):c.a.createElement(P.a,null,a.map((function(e){return c.a.createElement(_,{key:e.id,id:e.id,name:e.name})})))}var I=r(15),F=r(281);function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var J=Object(u.selector)({key:"UsersAdd",get:function(e){return(0,e.get)(R).isAdding},set:function(e,t){(0,e.set)(R,(function(e){return w(e,t)}))}});function V(){Object(k.b)("UserInput");var e=Object(u.useRecoilState)(J),t=o()(e,2),r=t[0],n=t[1];return c.a.createElement(F.a,{disabled:r},(function(e){return c.a.createElement(I.a,{disabled:r,onClick:function(){return function(e){n(y),S.b.addUser(e).then((function(e){return n(M(M({},h),{},{user:e}))})).catch((function(){return n(g)}))}(e)}},"Add user")}))}var K=Object(u.selector)({key:"userMutations",get:function(e){var t=(0,e.get)(R);return{isRemoving:t.isRemoving,errorRemoving:t.errorRemoving,isAdding:t.isAdding,errorAdding:t.errorAdding}}});function W(){Object(k.b)("UserIndicators");var e=Object(u.useRecoilValue)(K),t=e.isRemoving,r=e.errorRemoving,n=e.isAdding,s=e.errorAdding;return c.a.createElement(c.a.Fragment,null,t&&c.a.createElement(x.b,null,"Removing user..."),r&&c.a.createElement(x.a,null,"Failed to remove user"),n&&c.a.createElement(x.b,null,"Adding user..."),s&&c.a.createElement(x.a,null,"Failed to add user"))}var H=console.error;function G(){return Object(k.b)("UserListWrapper"),c.a.createElement(u.RecoilRoot,null,c.a.createElement(C,null),c.a.createElement(V,null),c.a.createElement(W,null))}console.error=function(e){if(!/Cannot update a component/.test(e)){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return H.apply(void 0,[e].concat(r))}};var Q=r(37),z=r(32),B=r(280),X=r(19),Y=r(279);function Z(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(z.b,null,"Recoil"),c.a.createElement(X.a,{text:"UserState.js",fileName:"components/recoil/UserState.js"}),c.a.createElement(X.a,{text:"UsersWrapper.js",fileName:"components/recoil/UsersWrapper.js"}),c.a.createElement(X.a,{text:"UserList.js",fileName:"components/recoil/UserList.js"}),c.a.createElement("br",null),c.a.createElement(X.a,{text:"UserInput.js",fileName:"components/recoil/UserInput.js"}),c.a.createElement(X.a,{text:"UserIndicators.js",fileName:"components/recoil/UserIndicators.js"}),c.a.createElement("br",null),c.a.createElement(B.a,null,c.a.createElement(G,null)),c.a.createElement(z.a,null,"Having all the state in a single atom causes all selector subscribers to rerender on state change."," ",c.a.createElement("a",{href:"https://github.com/facebookexperimental/Recoil/issues/139"},"Issues #139")),c.a.createElement(Y.a,null,c.a.createElement(Q.b,null),c.a.createElement(S.a,null)))}}}]);