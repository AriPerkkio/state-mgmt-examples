(self.webpackChunkstate_mgmt_examples=self.webpackChunkstate_mgmt_examples||[]).push([[829],{2108:function(e,t,r){"use strict";r.d(t,{Tt:function(){return R},ZP:function(){return O},Rf:function(){return y}});var n=r(7757),u=r.n(n),s=r(8926),c=r.n(s),i=r(4575),o=r.n(i),a=r(3913),l=r.n(a),f=r(9713),d=r.n(f),p=r(6967),m=r(7808),h=r.n(m),b=function(){function e(){var t=this;o()(this,e),d()(this,"requests",[]),d()(this,"subscribers",[]),d()(this,"getUsers",(function(){return t._fetch("/users")})),d()(this,"addUser",function(){var e=c()(u().mark((function e(r){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.addRequest("POST /users"),e.next=3,(0,p.gw)(2e3);case 3:return t.addRequest("OK /users"),e.abrupt("return",{name:r,id:(0,p.EL)()});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),d()(this,"removeUser",function(){var e=c()(u().mark((function e(r){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.addRequest("DELETE /users/".concat(r.id)),e.next=3,(0,p.gw)(2e3);case 3:t.addRequest("OK /users/".concat(r.id));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),d()(this,"clearRequests",(function(){t.requests=[],t.notifySubscribers()}))}var t,r;return l()(e,[{key:"_fetch",value:(r=c()(u().mark((function e(t){var r,n,s,i=this,o=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},n=r.delayMs,s=t.replace(this.baseUrl,""),this.addRequest("GET ".concat(s)),e.abrupt("return",this._mockFetch(t).then((function(e){if(!e.ok)throw new Error("Request to ".concat(t," failed with HTTP").concat(e.status));return e})).then((function(e){return e.json()})).then(function(){var e=c()(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.gw)(n||2e3);case 2:return i.addRequest("OK ".concat(s)),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"subscribe",value:function(e){this.subscribers.push(e),e(this.reqests)}},{key:"unSubscribe",value:function(e){this.subscribers=this.subscribers.filter((function(t){return t!==e}))}},{key:"addRequest",value:function(e){this.requests.push(e),this.notifySubscribers()}},{key:"notifySubscribers",value:function(){var e=this;this.subscribers.forEach((function(t){return t(e.requests)}))}},{key:"_mockFetch",value:(t=c()(u().mark((function e(t){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h()[t],e.abrupt("return",{ok:!!r,status:r?200:404,json:function(){return new Promise((function(e){return e(r)}))}});case 2:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}(),v=new b,O=v,y=v.getUsers,E=r(3038),g=r.n(E),j=r(7294),w=r(5049),x=r(3520);function R(){var e=(0,j.useReducer)((function(e){return e+1}),0),t=g()(e,2)[1];(0,j.useEffect)((function(){return O.subscribe(t),function(){O.unSubscribe(t),O.clearRequests()}}),[]);var r=O.requests.length,n=r>10?r-10:0;return j.createElement("section",null,j.createElement(w.H3,{onClick:O.clearRequests,style:{cursor:"pointer"}},"API requests, click to reset"),j.createElement(x.a,null,r>10&&j.createElement(x.H,null,"..."),O.requests.slice(n).map((function(e,t){return j.createElement(x.H,{key:t},e)}))))}},7808:function(e){e.exports={"/users":[{id:1,name:"John Doe"},{id:2,name:"Jane Doe"}]}},1830:function(e,t,r){"use strict";r.d(t,{E:function(){return s}});var n=r(9163),u=r(9848),s=n.ZP.div.withConfig({displayName:"Containers__FlexContainer",componentId:"osdxjy-0"})(["display:flex;& > * + *{margin-left:5rem;border-left:1px dashed ",";padding-left:2rem;}"],u.A2)},3242:function(e,t,r){"use strict";r.d(t,{Z:function(){return f}});var n=r(7154),u=r.n(n),s=r(3038),c=r.n(s),i=r(6479),o=r.n(i),a=r(7294),l=r(9163).ZP.input.withConfig({displayName:"Input__StyledInput",componentId:"tgycnj-0"})(["margin-right:1rem;&[disabled]{text-decoration:line-through;}"]);function f(e){var t=e.children,r=e.disabled,n=o()(e,["children","disabled"]),s=(0,a.useState)(""),i=c()(s,2),f=i[0],d=i[1];return(0,a.useEffect)((function(){!r&&d("")}),[r]),a.createElement("div",null,a.createElement(l,u()({type:"text",disabled:r,value:f,onChange:function(e){return d(e.target.value)}},n)),t(f))}},1162:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(3038),u=r.n(n),s=r(7294),c=r(5109);function i(e){var t=e.initiallyMounted,r=e.children,n=(0,s.useReducer)((function(e){return!e}),!!t),i=u()(n,2),o=i[0],a=i[1];return s.createElement(s.Fragment,null,s.createElement(c.Z,{onClick:a},o?"Unmount":"Mount"),o&&r)}},6967:function(e,t,r){"use strict";r.d(t,{gw:function(){return n},EL:function(){return s},ZT:function(){return c}});var n=function(e){return new Promise((function(t){return setTimeout(t,e)}))},u=10,s=function(){return u++},c=function(){}},8829:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return B}});var n=r(7294),u=r(9713),s=r.n(u),c=r(2108),i=r(3038),o=r.n(i),a=r(319),l=r.n(a);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p={type:"ON_LOAD"},m={type:"ON_SUCCESS"},h={type:"ON_ERROR"},b={type:"ON_ADD_START"},v={type:"ON_ADD_SUCCESS"},O={type:"ON_ADD_ERROR"},y={type:"ON_REMOVE_START"},E={type:"ON_REMOVE_SUCCESS"},g={type:"ON_REMOVE_ERROR"},j={users:[],isLoading:!1,hasLoaded:!1,error:!1,isAdding:!1,errorAdding:!1,isRemoving:!1,errorRemoving:!1};function w(e,t){switch(t.type){case p.type:return d(d({},e),{},{isLoading:!0,hasLoaded:!0});case m.type:return d(d({},e),{},{isLoading:!1,users:t.users});case h.type:return d(d({},e),{},{isLoading:!1,error:!0});case b.type:return d(d({},e),{},{isAdding:!0,errorAdding:!1});case v.type:return d(d({},e),{},{isAdding:!1,users:[].concat(l()(e.users),[t.user])});case O.type:return d(d({},e),{},{isAdding:!1,errorAdding:!0});case y.type:return d(d({},e),{},{isRemoving:!0,errorRemoving:!1});case E.type:return d(d({},e),{},{users:e.users.filter((function(e){return e.id!==t.user.id})),isRemoving:!1});case g:return d(d({},e),{},{isRemoving:!1,errorRemoving:!0});default:return e}}var x=r(6967),R=(0,n.createContext)({}),P=(0,n.createContext)(x.ZT),U=function(e){var t=e.children,r=(0,n.useReducer)(w,j),u=o()(r,2),s=u[0],c=u[1];return n.createElement(R.Provider,{value:s},n.createElement(P.Provider,{value:c},t))};function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(){var e=(0,n.useContext)(P);return{add:function(t){e(b),c.ZP.addUser(t).then((function(t){return e(_(_({},v),{},{user:t}))})).catch((function(){return e(O)}))},remove:function(t){e(y),c.ZP.removeUser(t).then((function(){return e(_(_({},E),{},{user:t}))})).catch((function(){return e(g)}))}}}var C=r(3520),D=r(3082),A=n.memo((function(e){var t=e.name,r=e.id;(0,D.tc)("UserItem: ".concat(t));var u=S().remove;return n.createElement(C.H,{onRemove:function(){return u({id:r})}},t)}));function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e){var t=(0,n.useContext)(R),r=(0,n.useContext)(P),u=e&&!t.isLoading&&!t.hasLoaded;return(0,n.useEffect)((function(){u&&(r(p),c.ZP.getUsers().then((function(e){return r(q(q({},m),{},{users:e}))})).catch((function(){return r(h)})))}),[u,r]),t}var Z=r(2938);function I(){(0,D.tc)("UserList");var e=L(!0),t=e.users,r=e.isLoading,u=e.hasLoaded,s=e.error;return r||!u?n.createElement(Z.a,null):s?n.createElement(Z.j,null):n.createElement(C.a,null,t.map((function(e){return n.createElement(A,{key:e.id,id:e.id,name:e.name})})))}var T=r(5109),F=r(3242);function M(){(0,D.tc)("UserInput");var e=L().isAdding,t=S().add;return n.createElement(F.Z,{disabled:e},(function(r){return n.createElement(T.Z,{disabled:e,onClick:function(){return t(r)}},"Add user")}))}function H(){(0,D.tc)("UserIndicators");var e=L(),t=e.isRemoving,r=e.errorRemoving,u=e.isAdding,s=e.errorAdding;return n.createElement(n.Fragment,null,t&&n.createElement(Z.a,null,"Removing user..."),r&&n.createElement(Z.j,null,"Failed to remove user"),u&&n.createElement(Z.a,null,"Adding user..."),s&&n.createElement(Z.j,null,"Failed to add user"))}function K(){return(0,D.tc)("UserListWrapper"),n.createElement(U,null,n.createElement(I,null),n.createElement(M,null),n.createElement(H,null))}var V=r(5049),W=r(5943),J=r(6406),G=r(1162),z=r(1830);function B(){return n.createElement(n.Fragment,null,n.createElement(V.H1,null,"Context"),n.createElement(T._,null,n.createElement(W.Ou,{text:"UserContext.js",fileName:"components/context/UserContext.js"}),n.createElement(W.Ou,{text:"useUsers.js",fileName:"components/context/useUsers.js"}),n.createElement(W.Ou,{text:"useUserMethods.js",fileName:"components/context/useUserMethods.js"}),n.createElement(W.Ou,{text:"reducer.js",fileName:"components/context/reducer.js"}),n.createElement(W.Ou,{text:"UserInput.js",fileName:"components/context/UserInput.js"}),n.createElement(W.Ou,{text:"UserItem.js",fileName:"components/context/UserItem.js"}),n.createElement(W.Ou,{text:"UserIndicators.js",fileName:"components/context/UserIndicators.js"}),n.createElement(W.Ou,{text:"UserList.js",fileName:"components/context/UserList.js"}),n.createElement(W.Ou,{text:"UsersWrapper.js",fileName:"components/context/UsersWrapper.js"})),n.createElement("br",null),n.createElement(G.Z,null,n.createElement(K,null)),n.createElement(z.E,null,n.createElement(J.Z,null),n.createElement(c.Tt,null)))}}}]);