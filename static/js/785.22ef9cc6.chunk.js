(self.webpackChunkstate_mgmt_examples=self.webpackChunkstate_mgmt_examples||[]).push([[785],{7025:function(e,t,r){"use strict";r.d(t,{Tt:function(){return P},ZP:function(){return b},Rf:function(){return v}});var n=r(7757),u=r.n(n),s=r(8926),i=r.n(s),c=r(4575),o=r.n(c),a=r(3913),l=r.n(a),f=r(9713),d=r.n(f),p=r(8903),m=r(7746),h=r.n(m),g=function(){function e(){var t=this;o()(this,e),d()(this,"requests",[]),d()(this,"subscribers",[]),d()(this,"getUsers",(function(){return t._fetch("/users")})),d()(this,"addUser",function(){var e=i()(u().mark((function e(r){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.addRequest("POST /users"),e.next=3,(0,p.gw)(2e3);case 3:return t.addRequest("OK /users"),e.abrupt("return",{name:r,id:(0,p.EL)()});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),d()(this,"removeUser",function(){var e=i()(u().mark((function e(r){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.addRequest("DELETE /users/".concat(r.id)),e.next=3,(0,p.gw)(2e3);case 3:t.addRequest("OK /users/".concat(r.id));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),d()(this,"clearRequests",(function(){t.requests=[],t.notifySubscribers()}))}var t,r;return l()(e,[{key:"_fetch",value:(r=i()(u().mark((function e(t){var r,n,s,c=this,o=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},n=r.delayMs,s=t.replace(this.baseUrl,""),this.addRequest("GET ".concat(s)),e.abrupt("return",this._mockFetch(t).then((function(e){if(!e.ok)throw new Error("Request to ".concat(t," failed with HTTP").concat(e.status));return e})).then((function(e){return e.json()})).then(function(){var e=i()(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.gw)(n||2e3);case 2:return c.addRequest("OK ".concat(s)),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"subscribe",value:function(e){this.subscribers.push(e),e(this.reqests)}},{key:"unSubscribe",value:function(e){this.subscribers=this.subscribers.filter((function(t){return t!==e}))}},{key:"addRequest",value:function(e){this.requests.push(e),this.notifySubscribers()}},{key:"notifySubscribers",value:function(){var e=this;this.subscribers.forEach((function(t){return t(e.requests)}))}},{key:"_mockFetch",value:(t=i()(u().mark((function e(t){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h()[t],e.abrupt("return",{ok:!!r,status:r?200:404,json:function(){return new Promise((function(e){return e(r)}))}});case 2:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}(),y=new g,b=y,v=y.getUsers,O=r(3038),E=r.n(O),R=r(7294),w=r(9434),j=r(5973),S=$RefreshSig$();function P(){S();var e=(0,R.useReducer)((function(e){return e+1}),0),t=E()(e,2)[1];(0,R.useEffect)((function(){return b.subscribe(t),function(){b.unSubscribe(t),b.clearRequests()}}),[]);var r=b.requests.length,n=r>10?r-10:0;return R.createElement("section",null,R.createElement(w.H3,{onClick:b.clearRequests,style:{cursor:"pointer"}},"API requests, click to reset"),R.createElement(j.a,null,r>10&&R.createElement(j.H,null,"..."),b.requests.slice(n).map((function(e,t){return R.createElement(j.H,{key:t},e)}))))}S(P,"UxqsAPbyOOo6jkpO1hjMpCydUI8="),$RefreshReg$(P,"ApiRequests")},7746:function(e){e.exports={"/users":[{id:1,name:"John Doe"},{id:2,name:"Jane Doe"}]}},3225:function(e,t,r){"use strict";r.d(t,{E:function(){return s}});var n=r(9163),u=r(9630),s=n.ZP.div.withConfig({displayName:"Containers__FlexContainer",componentId:"osdxjy-0"})(["display:flex;& > * + *{margin-left:5rem;border-left:1px dashed ",";padding-left:2rem;}"],u.A2)},6722:function(e,t,r){"use strict";r.d(t,{Z:function(){return h}});var n,u,s=r(7154),i=r.n(s),c=r(3038),o=r.n(c),a=r(6479),l=r.n(a),f=r(7294),d=r(9163),p=$RefreshSig$(),m=d.ZP.input.withConfig({displayName:"Input__StyledInput",componentId:"tgycnj-0"})(["margin-right:1rem;&[disabled]{text-decoration:line-through;}"]);function h(e){p();var t=e.children,r=e.disabled,n=l()(e,["children","disabled"]),u=(0,f.useState)(""),s=o()(u,2),c=s[0],a=s[1];return(0,f.useEffect)((function(){!r&&a("")}),[r]),f.createElement("div",null,f.createElement(m,i()({type:"text",disabled:r,value:c,onChange:function(e){return a(e.target.value)}},n)),t(c))}n=m,p(h,"aFIykL0K1j3we4veeaDstLdSuC8="),u=h,$RefreshReg$(n,"StyledInput"),$RefreshReg$(u,"Input")},448:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(3038),u=r.n(n),s=r(7294),i=r(9693),c=$RefreshSig$();function o(e){c();var t=e.initiallyMounted,r=e.children,n=(0,s.useReducer)((function(e){return!e}),!!t),o=u()(n,2),a=o[0],l=o[1];return s.createElement(s.Fragment,null,s.createElement(i.Z,{onClick:l},a?"Unmount":"Mount"),a&&r)}c(o,"SGBRyZ8qj4KP74qoZGVxnnGCTRI="),$RefreshReg$(o,"MountToggle")},8903:function(e,t,r){"use strict";r.d(t,{gw:function(){return n},EL:function(){return s},ZT:function(){return i}});var n=function(e){return new Promise((function(t){return setTimeout(t,e)}))},u=10,s=function(){return u++},i=function(){}},4785:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return M}});var n=r(7294),u=r(6479),s=r.n(u),i=r(2614),c=r(5973),o=r(6722),a=r(9693),l=r(9713),f=r.n(l),d=r(3038),p=r.n(d),m=r(7025),h=r(319),g=r.n(h);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){f()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v={type:"ON_LOAD"},O={type:"ON_SUCCESS"},E={type:"ON_ERROR"},R={type:"ON_ADD_START"},w={type:"ON_ADD_SUCCESS"},j={type:"ON_ADD_ERROR"},S={type:"ON_REMOVE_START"},P={type:"ON_REMOVE_SUCCESS"},k={type:"ON_REMOVE_ERROR"},_={users:[],isLoading:!1,hasLoaded:!1,error:!1,isAdding:!1,errorAdding:!1,isRemoving:!1,errorRemoving:!1};function q(e,t){switch(t.type){case v.type:return b(b({},e),{},{isLoading:!0,hasLoaded:!0});case O.type:return b(b({},e),{},{isLoading:!1,users:t.users});case E.type:return b(b({},e),{},{isLoading:!1,error:!0});case R.type:return b(b({},e),{},{isAdding:!0,errorAdding:!1});case w.type:return b(b({},e),{},{isAdding:!1,users:[].concat(g()(e.users),[t.user])});case j.type:return b(b({},e),{},{isAdding:!1,errorAdding:!0});case S.type:return b(b({},e),{},{isRemoving:!0,errorRemoving:!1});case P.type:return b(b({},e),{},{users:e.users.filter((function(e){return e.id!==t.user.id})),isRemoving:!1});case P:return b(b({},e),{},{isRemoving:!1,errorRemoving:!0});default:return e}}var A=$RefreshSig$();function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){f()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(){A();var e=(0,n.useReducer)(q,_),t=p()(e,2),r=t[0],u=t[1];return(0,n.useEffect)((function(){u(v),m.ZP.getUsers().then((function(e){return u($($({},O),{},{users:e}))})).catch((function(e){console.error(e),u(E)}))}),[]),$($({},r),{},{add:function(e){u(R),m.ZP.addUser(e).then((function(e){return u($($({},w),{},{user:e}))})).catch((function(){return u(j)}))},remove:function(e){u(S),m.ZP.removeUser(e).then((function(){return u($($({},P),{},{user:e}))})).catch((function(){return u(k)}))}})}A(L,"bgCdjuTOmPdSBRwTap80EFd9Y3U=");var U=r(4494),C=$RefreshSig$();function D(){C(),(0,U.tc)("UserList");var e=L(),t=e.add,r=e.remove,u=s()(e,["add","remove"]);return u.isLoading||!u.hasLoaded?n.createElement(i.a,null):u.error?n.createElement(i.j,null):n.createElement(n.Fragment,null,n.createElement(c.a,null,u.users.map((function(e){return n.createElement(c.H,{key:e.id,onRemove:function(){return r(e)}},e.name)}))),n.createElement(o.Z,{disabled:u.isAdding},(function(e){return n.createElement(a.Z,{disabled:u.isAdding,onClick:function(){return t(e)}},"Add user")})),u.isRemoving&&n.createElement(i.a,null,"Removing user..."),u.errorRemoving&&n.createElement(i.j,null,"Failed to remove user"),u.isAdding&&n.createElement(i.a,null,"Adding user..."),u.errorAdding&&n.createElement(i.j,null,"Failed to add user"))}C(D,"I3VGLJ7bwm1SgJ0oOO9hKq1PoQ4=",!1,(function(){return[U.tc,L]})),$RefreshReg$(D,"UserList");var T=r(9434),Z=r(9268),N=r(5376),I=r(3225),F=r(448);function M(){return n.createElement(n.Fragment,null,n.createElement(T.H1,null,"Local State"),n.createElement(a._,null,n.createElement(Z.Ou,{text:"reducer.js",fileName:"components/local-state/reducer.js"}),n.createElement(Z.Ou,{text:"useUsers.js",fileName:"components/local-state/useUsers.js"}),n.createElement(Z.Ou,{text:"UserList.js",fileName:"components/local-state/UserList.js"})),n.createElement(F.Z,null,n.createElement(D,null)),n.createElement(I.E,null,n.createElement(N.Z,null),n.createElement(m.Tt,null)))}$RefreshReg$(M,"LocalStateView")}}]);