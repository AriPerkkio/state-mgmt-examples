(self.webpackChunkstate_mgmt_examples=self.webpackChunkstate_mgmt_examples||[]).push([[832],{2108:function(e,t,r){"use strict";r.d(t,{Tt:function(){return _},ZP:function(){return E},Rf:function(){return v}});var n=r(7757),s=r.n(n),u=r(8926),i=r.n(u),c=r(4575),o=r.n(c),a=r(3913),l=r.n(a),f=r(9713),d=r.n(f),m=r(6967),p=r(7808),h=r.n(p),g=function(){function e(){var t=this;o()(this,e),d()(this,"requests",[]),d()(this,"subscribers",[]),d()(this,"getUsers",(function(){return t._fetch("/users")})),d()(this,"addUser",function(){var e=i()(s().mark((function e(r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.addRequest("POST /users"),e.next=3,(0,m.gw)(2e3);case 3:return t.addRequest("OK /users"),e.abrupt("return",{name:r,id:(0,m.EL)()});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),d()(this,"removeUser",function(){var e=i()(s().mark((function e(r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.addRequest("DELETE /users/".concat(r.id)),e.next=3,(0,m.gw)(2e3);case 3:t.addRequest("OK /users/".concat(r.id));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),d()(this,"clearRequests",(function(){t.requests=[],t.notifySubscribers()}))}var t,r;return l()(e,[{key:"_fetch",value:(r=i()(s().mark((function e(t){var r,n,u,c=this,o=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},n=r.delayMs,u=t.replace(this.baseUrl,""),this.addRequest("GET ".concat(u)),e.abrupt("return",this._mockFetch(t).then((function(e){if(!e.ok)throw new Error("Request to ".concat(t," failed with HTTP").concat(e.status));return e})).then((function(e){return e.json()})).then(function(){var e=i()(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.gw)(n||2e3);case 2:return c.addRequest("OK ".concat(u)),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"subscribe",value:function(e){this.subscribers.push(e),e(this.reqests)}},{key:"unSubscribe",value:function(e){this.subscribers=this.subscribers.filter((function(t){return t!==e}))}},{key:"addRequest",value:function(e){this.requests.push(e),this.notifySubscribers()}},{key:"notifySubscribers",value:function(){var e=this;this.subscribers.forEach((function(t){return t(e.requests)}))}},{key:"_mockFetch",value:(t=i()(s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h()[t],e.abrupt("return",{ok:!!r,status:r?200:404,json:function(){return new Promise((function(e){return e(r)}))}});case 2:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}(),R=new g,E=R,v=R.getUsers,b=r(3038),S=r.n(b),y=r(7294),O=r(5049),U=r(3520),w=$RefreshSig$();function _(){w();var e=(0,y.useReducer)((function(e){return e+1}),0),t=S()(e,2)[1];(0,y.useEffect)((function(){return E.subscribe(t),function(){E.unSubscribe(t),E.clearRequests()}}),[]);var r=E.requests.length,n=r>10?r-10:0;return y.createElement("section",null,y.createElement(O.H3,{onClick:E.clearRequests,style:{cursor:"pointer"}},"API requests, click to reset"),y.createElement(U.a,null,r>10&&y.createElement(U.H,null,"..."),E.requests.slice(n).map((function(e,t){return y.createElement(U.H,{key:t},e)}))))}w(_,"UxqsAPbyOOo6jkpO1hjMpCydUI8="),$RefreshReg$(_,"ApiRequests")},7808:function(e){e.exports={"/users":[{id:1,name:"John Doe"},{id:2,name:"Jane Doe"}]}},1830:function(e,t,r){"use strict";r.d(t,{E:function(){return u}});var n=r(9163),s=r(9848),u=n.ZP.div.withConfig({displayName:"Containers__FlexContainer",componentId:"osdxjy-0"})(["display:flex;& > * + *{margin-left:5rem;border-left:1px dashed ",";padding-left:2rem;}"],s.A2)},3242:function(e,t,r){"use strict";r.d(t,{Z:function(){return h}});var n,s,u=r(7154),i=r.n(u),c=r(3038),o=r.n(c),a=r(6479),l=r.n(a),f=r(7294),d=r(9163),m=$RefreshSig$(),p=d.ZP.input.withConfig({displayName:"Input__StyledInput",componentId:"tgycnj-0"})(["margin-right:1rem;&[disabled]{text-decoration:line-through;}"]);function h(e){m();var t=e.children,r=e.disabled,n=l()(e,["children","disabled"]),s=(0,f.useState)(""),u=o()(s,2),c=u[0],a=u[1];return(0,f.useEffect)((function(){!r&&a("")}),[r]),f.createElement("div",null,f.createElement(p,i()({type:"text",disabled:r,value:c,onChange:function(e){return a(e.target.value)}},n)),t(c))}n=p,m(h,"aFIykL0K1j3we4veeaDstLdSuC8="),s=h,$RefreshReg$(n,"StyledInput"),$RefreshReg$(s,"Input")},1162:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(3038),s=r.n(n),u=r(7294),i=r(5109),c=$RefreshSig$();function o(e){c();var t=e.initiallyMounted,r=e.children,n=(0,u.useReducer)((function(e){return!e}),!!t),o=s()(n,2),a=o[0],l=o[1];return u.createElement(u.Fragment,null,u.createElement(i.Z,{onClick:l},a?"Unmount":"Mount"),a&&r)}c(o,"SGBRyZ8qj4KP74qoZGVxnnGCTRI="),$RefreshReg$(o,"MountToggle")},6967:function(e,t,r){"use strict";r.d(t,{gw:function(){return n},EL:function(){return u},ZT:function(){return i}});var n=function(e){return new Promise((function(t){return setTimeout(t,e)}))},s=10,u=function(){return s++},i=function(){}},4832:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return B}});var n=r(7294),s=r(7703),u=r(4890),i=r(319),c=r.n(i),o=r(9713),a=r.n(o),l="ON_USERS_LOAD_START",f="ON_USERS_LOAD_SUCCESS",d="ON_USERS_LOAD_ERROR",m="ON_USER_ADD_START",p="ON_USER_ADD_SUCCESS",h="ON_USER_ADD_ERROR",g="ON_USER_REMOVE_START",R="ON_USER_REMOVE_SUCCESS",E="ON_USER_REMOVE_ERROR";function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var S,y,O={users:[],isLoading:!1,hasLoaded:!1,error:!1,isAdding:!1,errorAdding:!1,isRemoving:!1,errorRemoving:!1},U=r(3520),w=r(3082),_=r(2108),$=$RefreshSig$(),j=y=$(n.memo(S=$((function(e){$();var t=e.name,r=e.id;(0,w.tc)("UserItem: ".concat(t));var u=(0,s.useDispatch)();return n.createElement(U.H,{onRemove:function(){u({type:g}),_.ZP.removeUser({name:t,id:r}).then((function(){return u({type:R,user:{name:t,id:r}})})).catch((function(){return u({type:E})}))}},t)}),"wd+XM1IGdpP37WUxZXwNSWwTecU=",!1,(function(){return[w.tc,s.useDispatch]}))),"wd+XM1IGdpP37WUxZXwNSWwTecU=",!1,(function(){return[w.tc,s.useDispatch]}));$RefreshReg$(S,"%default%$React.memo"),$RefreshReg$(y,"%default%");var x=r(2938),A=$RefreshSig$();function k(e){A();var t=e.users,r=e.isLoading,s=e.shouldFetch,u=e.error,i=e.setLoading,c=e.setUsers,o=e.setUsersError;return(0,w.tc)("UserList"),(0,n.useEffect)((function(){s&&(i(),_.ZP.getUsers().then((function(e){return c(e)})).catch((function(){return o()})))}),[s,i,c,o]),r||s?n.createElement(x.a,null):u?n.createElement(x.j,null):n.createElement(U.a,null,t.map((function(e){return n.createElement(j,{key:e.id,id:e.id,name:e.name})})))}A(k,"ovg+HIuBbNIr+BlVzWBYeOp6iiE=",!1,(function(){return[w.tc]})),I=k;var I,L=(0,s.connect)((function(e){return{users:e.users,isLoading:e.isLoading,shouldFetch:!e.isLoading&&!e.hasLoaded,error:e.error}}),(function(e){return{setLoading:function(){return e({type:l})},setUsers:function(t){return e(function(e){return{type:f,users:e}}(t))},setUsersError:function(){return e({type:d})}}}))(k);$RefreshReg$(I,"UserList");var q=r(5109),D=r(3242),P=$RefreshSig$();function N(){P(),(0,w.tc)("UserInput");var e=(0,s.useSelector)((function(e){return e.isAdding})),t=(0,s.useDispatch)();return n.createElement(D.Z,{disabled:e},(function(r){return n.createElement(q.Z,{disabled:e,onClick:function(){return function(e){t({type:m}),_.ZP.addUser(e).then((function(e){return t(function(e){return{type:p,user:e}}(e))})).catch((function(){return t({type:h})}))}(r)}},"Add user")}))}P(N,"c4KCzwajFrp9BUdA+aO9gmLYGZI=",!1,(function(){return[w.tc,s.useSelector,s.useDispatch]})),$RefreshReg$(N,"UserInput");var Z=$RefreshSig$();function C(){Z(),(0,w.tc)("UserIndicators");var e=(0,s.useSelector)((function(e){return{isRemoving:e.isRemoving,errorRemoving:e.errorRemoving,isAdding:e.isAdding,errorAdding:e.errorAdding}})),t=e.isRemoving,r=e.errorRemoving,u=e.isAdding,i=e.errorAdding;return n.createElement(n.Fragment,null,t&&n.createElement(x.a,null,"Removing user..."),r&&n.createElement(x.j,null,"Failed to remove user"),u&&n.createElement(x.a,null,"Adding user..."),i&&n.createElement(x.j,null,"Failed to add user"))}Z(C,"IIKXq6qZZf2d0p+D7A/hlDN440s=",!1,(function(){return[w.tc,s.useSelector]})),$RefreshReg$(C,"UserIndicators");var T=$RefreshSig$(),F=(0,u.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return b(b({},e),{},{isLoading:!0,hasLoaded:!0});case f:return b(b({},e),{},{isLoading:!1,users:t.users});case d:return b(b({},e),{},{isLoading:!1,error:!0});case m:return b(b({},e),{},{isAdding:!0,errorAdding:!1});case p:return b(b({},e),{},{isAdding:!1,users:[].concat(c()(e.users),[t.user])});case h:return b(b({},e),{},{isAdding:!1,errorAdding:!0});case g:return b(b({},e),{},{isRemoving:!0,errorRemoving:!1});case R:return b(b({},e),{},{users:e.users.filter((function(e){return e.id!==t.user.id})),isRemoving:!1});case E:return b(b({},e),{},{isRemoving:!1,errorRemoving:!0});default:return e}}));function M(){return T(),(0,w.tc)("UserListWrapper"),n.createElement(s.Provider,{store:F},n.createElement(L,null),n.createElement(N,null),n.createElement(C,null))}T(M,"1tajz0682eLN0aQrzvJO/S9cJ4U=",!1,(function(){return[w.tc]})),$RefreshReg$(M,"UsersWrapper");var W=r(6406),G=r(5049),H=r(1162),K=r(5943),V=r(1830);function B(){return n.createElement(n.Fragment,null,n.createElement(G.H1,null,"Redux"),n.createElement(q._,null,n.createElement(K.Ou,{text:"actions.js",fileName:"components/redux/actions.js"}),n.createElement(K.Ou,{text:"reducer.js",fileName:"components/redux/reducer.js"}),n.createElement(K.Ou,{text:"UsersWrapper.js",fileName:"components/redux/UsersWrapper.js"}),n.createElement(K.Ou,{text:"UserList.js",fileName:"components/redux/UserList.js"}),n.createElement(K.Ou,{text:"UserInput.js",fileName:"components/redux/UserInput.js"}),n.createElement(K.Ou,{text:"UserItem.js",fileName:"components/redux/UserItem.js"}),n.createElement(K.Ou,{text:"UserIndicators.js",fileName:"components/redux/UserIndicators.js"})),n.createElement(H.Z,null,n.createElement(M,null)),n.createElement(V.E,null,n.createElement(W.Z,null),n.createElement(_.Tt,null)))}$RefreshReg$(B,"ReduxView")}}]);