(self.webpackChunkstate_mgmt_examples=self.webpackChunkstate_mgmt_examples||[]).push([[261],{2108:function(e,n,t){"use strict";t.d(n,{Tt:function(){return w},ZP:function(){return E},Rf:function(){return b}});var r=t(7757),u=t.n(r),s=t(8926),i=t.n(s),o=t(4575),c=t.n(o),a=t(3913),l=t.n(a),d=t(9713),f=t.n(d),m=t(6967),h=t(7808),p=t.n(h),g=function(){function e(){var n=this;c()(this,e),f()(this,"requests",[]),f()(this,"subscribers",[]),f()(this,"getUsers",(function(){return n._fetch("/users")})),f()(this,"addUser",function(){var e=i()(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.addRequest("POST /users"),e.next=3,(0,m.gw)(2e3);case 3:return n.addRequest("OK /users"),e.abrupt("return",{name:t,id:(0,m.EL)()});case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),f()(this,"removeUser",function(){var e=i()(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.addRequest("DELETE /users/".concat(t.id)),e.next=3,(0,m.gw)(2e3);case 3:n.addRequest("OK /users/".concat(t.id));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),f()(this,"clearRequests",(function(){n.requests=[],n.notifySubscribers()}))}var n,t;return l()(e,[{key:"_fetch",value:(t=i()(u().mark((function e(n){var t,r,s,o=this,c=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>1&&void 0!==c[1]?c[1]:{},r=t.delayMs,s=n.replace(this.baseUrl,""),this.addRequest("GET ".concat(s)),e.abrupt("return",this._mockFetch(n).then((function(e){if(!e.ok)throw new Error("Request to ".concat(n," failed with HTTP").concat(e.status));return e})).then((function(e){return e.json()})).then(function(){var e=i()(u().mark((function e(n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.gw)(r||2e3);case 2:return o.addRequest("OK ".concat(s)),e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"subscribe",value:function(e){this.subscribers.push(e),e(this.reqests)}},{key:"unSubscribe",value:function(e){this.subscribers=this.subscribers.filter((function(n){return n!==e}))}},{key:"addRequest",value:function(e){this.requests.push(e),this.notifySubscribers()}},{key:"notifySubscribers",value:function(){var e=this;this.subscribers.forEach((function(n){return n(e.requests)}))}},{key:"_mockFetch",value:(n=i()(u().mark((function e(n){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p()[n],e.abrupt("return",{ok:!!t,status:t?200:404,json:function(){return new Promise((function(e){return e(t)}))}});case 2:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})}]),e}(),v=new g,E=v,b=v.getUsers,R=t(3038),U=t.n(R),k=t(7294),x=t(5049),y=t(3520);function w(){var e=(0,k.useReducer)((function(e){return e+1}),0),n=U()(e,2)[1];(0,k.useEffect)((function(){return E.subscribe(n),function(){E.unSubscribe(n),E.clearRequests()}}),[]);var t=E.requests.length,r=t>10?t-10:0;return k.createElement("section",null,k.createElement(x.H3,{onClick:E.clearRequests,style:{cursor:"pointer"}},"API requests, click to reset"),k.createElement(y.a,null,t>10&&k.createElement(y.H,null,"..."),E.requests.slice(r).map((function(e,n){return k.createElement(y.H,{key:n},e)}))))}},7808:function(e){e.exports={"/users":[{id:1,name:"John Doe"},{id:2,name:"Jane Doe"}]}},1830:function(e,n,t){"use strict";t.d(n,{E:function(){return s}});var r=t(9163),u=t(9848),s=r.ZP.div.withConfig({displayName:"Containers__FlexContainer",componentId:"osdxjy-0"})(["display:flex;& > * + *{margin-left:5rem;border-left:1px dashed ",";padding-left:2rem;}"],u.A2)},3242:function(e,n,t){"use strict";t.d(n,{Z:function(){return d}});var r=t(7154),u=t.n(r),s=t(3038),i=t.n(s),o=t(6479),c=t.n(o),a=t(7294),l=t(9163).ZP.input.withConfig({displayName:"Input__StyledInput",componentId:"tgycnj-0"})(["margin-right:1rem;&[disabled]{text-decoration:line-through;}"]);function d(e){var n=e.children,t=e.disabled,r=c()(e,["children","disabled"]),s=(0,a.useState)(""),o=i()(s,2),d=o[0],f=o[1];return(0,a.useEffect)((function(){!t&&f("")}),[t]),a.createElement("div",null,a.createElement(l,u()({type:"text",disabled:t,value:d,onChange:function(e){return f(e.target.value)}},r)),n(d))}},1162:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var r=t(3038),u=t.n(r),s=t(7294),i=t(5109);function o(e){var n=e.initiallyMounted,t=e.children,r=(0,s.useReducer)((function(e){return!e}),!!n),o=u()(r,2),c=o[0],a=o[1];return s.createElement(s.Fragment,null,s.createElement(i.Z,{onClick:a},c?"Unmount":"Mount"),c&&t)}},6967:function(e,n,t){"use strict";t.d(n,{gw:function(){return r},EL:function(){return s},ZT:function(){return i}});var r=function(e){return new Promise((function(n){return setTimeout(n,e)}))},u=10,s=function(){return u++},i=function(){}},1261:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return F}});var r=t(7294),u=t(7703),s=t(7307),i=t(2108),o=(0,s.oM)({name:"users",initialState:{users:[],isLoading:!1,hasLoaded:!1,error:!1,isAdding:!1,errorAdding:!1,isRemoving:!1,errorRemoving:!1},reducers:{setLoading:function(e){e.isLoading=!0,e.error=!1},setUsers:function(e,n){e.isLoading=!1,e.hasLoaded=!0,e.users=n.payload},setError:function(e){e.isLoading=!1,e.hasLoaded=!0,e.error=!0},setAdding:function(e){e.isAdding=!0,e.errorAdding=!1},addUser:function(e,n){e.isAdding=!1,e.users.push(n.payload)},setAddingError:function(e){e.isAdding=!1,e.errorAdding=!0},setRemoving:function(e){e.isRemoving=!0,e.errorRemoving=!1},removeUser:function(e,n){e.isRemoving=!1,e.users=e.users.filter((function(e){return e.id!==n.payload.id}))},setRemovingError:function(e){e.isRemoving=!1,e.errorRemoving=!0}}}),c=o.actions,a=c.setLoading,l=c.setUsers,d=c.setError,f=c.setAdding,m=c.addUser,h=c.setAddingError,p=c.setRemoving,g=c.removeUser,v=c.setRemovingError,E=o.reducer,b=t(3520),R=t(3082),U=r.memo((function(e){var n=e.name,t=e.id;(0,R.tc)("UserItem: ".concat(n));var s=(0,u.useDispatch)();return r.createElement(b.H,{onRemove:function(){return s((e={name:n,id:t},function(n){n(p()),i.ZP.removeUser(e).then((function(){return n(g(e))})).catch((function(){return n(v())}))}));var e}},n)})),k=t(2938),x={loadUsers:function(){return function(e){e(a()),i.ZP.getUsers().then((function(n){return e(l(n))})).catch((function(){return e(d())}))}}},y=(0,u.connect)((function(e){return{users:e.users,isLoading:e.isLoading,shouldFetch:!e.isLoading&&!e.hasLoaded,error:e.error}}),x)((function(e){var n=e.users,t=e.isLoading,u=e.shouldFetch,s=e.error,i=e.loadUsers;return(0,R.tc)("UserList"),(0,r.useEffect)((function(){u&&i()}),[u,i]),t||u?r.createElement(k.a,null):s?r.createElement(k.j,null):r.createElement(b.a,null,n.map((function(e){return r.createElement(U,{key:e.id,id:e.id,name:e.name})})))})),w=t(5109),A=t(3242);function L(){(0,R.tc)("UserInput");var e=(0,u.useSelector)((function(e){return e.isAdding})),n=(0,u.useDispatch)();return r.createElement(A.Z,{disabled:e},(function(t){return r.createElement(w.Z,{disabled:e,onClick:function(){return function(e){return n(function(e){return function(n){n(f()),i.ZP.addUser(e).then((function(e){return n(m(e))})).catch((function(){return n(h())}))}}(e))}(t)}},"Add user")}))}function j(){(0,R.tc)("UserIndicators");var e=(0,u.useSelector)((function(e){return{isRemoving:e.isRemoving,errorRemoving:e.errorRemoving,isAdding:e.isAdding,errorAdding:e.errorAdding}})),n=e.isRemoving,t=e.errorRemoving,s=e.isAdding,i=e.errorAdding;return r.createElement(r.Fragment,null,n&&r.createElement(k.a,null,"Removing user..."),t&&r.createElement(k.j,null,"Failed to remove user"),s&&r.createElement(k.a,null,"Adding user..."),i&&r.createElement(k.j,null,"Failed to add user"))}var q=(0,s.xC)({reducer:E});function I(){return(0,R.tc)("UserListWrapper"),r.createElement(u.Provider,{store:q},r.createElement(y,null),r.createElement(L,null),r.createElement(j,null))}var Z=t(6406),S=t(5049),_=t(1162),P=t(5943),C=t(1830);function F(){return r.createElement(r.Fragment,null,r.createElement(S.H1,null,"Redux Toolkit"),r.createElement(w._,null,r.createElement(P.Ou,{text:"UsersSlice.js",fileName:"components/redux-toolkit/UsersSlice.js"}),r.createElement(P.Ou,{text:"UsersWrapper.js",fileName:"components/redux-toolkit/UsersWrapper.js"}),r.createElement(P.Ou,{text:"UserList.js",fileName:"components/redux-toolkit/UserList.js"}),r.createElement(P.Ou,{text:"UserItem.js",fileName:"components/redux-toolkit/UserItem.js"}),r.createElement(P.Ou,{text:"UserInput.js",fileName:"components/redux-toolkit/UserInput.js"}),r.createElement(P.Ou,{text:"UserIndicators.js",fileName:"components/redux-toolkit/UserIndicators.js"})),r.createElement(_.Z,null,r.createElement(I,null)),r.createElement(C.E,null,r.createElement(Z.Z,null),r.createElement(i.Tt,null)))}}}]);