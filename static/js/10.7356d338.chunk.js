(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{275:function(e,t,n){"use strict";n.d(t,"b",(function(){return E})),n.d(t,"a",(function(){return w}));var r=n(283),u=n.n(r),a=n(284),s=n.n(a),c=n(36),i=n.n(c),o=n(37),l=n.n(o),f=n(7),d=n.n(f),m=n(277),b=n(278),h=n.n(b),E=new(function(){function e(){var t=this;i()(this,e),d()(this,"requests",[]),d()(this,"subscribers",[]),d()(this,"getUsers",(function(){return t._fetch("/users")})),d()(this,"addUser",function(){var e=s()(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.addRequest("POST /users"),e.next=3,Object(m.a)(2e3);case 3:return t.addRequest("OK /users"),e.abrupt("return",{name:n,id:Object(m.c)()});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),d()(this,"removeUser",function(){var e=s()(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.addRequest("DELETE /users/".concat(n.id)),e.next=3,Object(m.a)(2e3);case 3:t.addRequest("OK /users/".concat(n.id));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),d()(this,"clearRequests",(function(){t.requests=[],t.notifySubscribers()}))}var t,n;return l()(e,[{key:"_fetch",value:(n=s()(u.a.mark((function e(t){var n,r,a,c=this,i=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},r=n.delayMs,a=t.replace(this.baseUrl,""),this.addRequest("GET ".concat(a)),e.abrupt("return",this._mockFetch(t).then((function(e){if(!e.ok)throw new Error("Request to ".concat(t," failed with HTTP").concat(e.status));return e})).then((function(e){return e.json()})).then(function(){var e=s()(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.a)(r||2e3);case 2:return c.addRequest("OK ".concat(a)),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"subscribe",value:function(e){this.subscribers.push(e),e(this.reqests)}},{key:"unSubscribe",value:function(e){this.subscribers=this.subscribers.filter((function(t){return t!==e}))}},{key:"addRequest",value:function(e){this.requests.push(e),this.notifySubscribers()}},{key:"notifySubscribers",value:function(){var e=this;this.subscribers.forEach((function(t){return t(e.requests)}))}},{key:"_mockFetch",value:(t=s()(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h.a[t],e.abrupt("return",{ok:!!n,status:n?200:404,json:function(){return new Promise((function(e){return e(n)}))}});case 2:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}()),p=n(2),v=n.n(p),O=n(0),R=n.n(O),j=n(34),y=n(17);function w(){var e=Object(O.useReducer)((function(e){return e+1}),0),t=v()(e,2)[1];Object(O.useEffect)((function(){return E.subscribe(t),function(){E.unSubscribe(t),E.clearRequests()}}),[]);var n=E.requests.length,r=n>10?n-10:0;return R.a.createElement("section",null,R.a.createElement(j.d,{onClick:E.clearRequests,style:{cursor:"pointer"}},"API requests, click to reset"),R.a.createElement(y.a,null,n>10&&R.a.createElement(y.b,null,"..."),E.requests.slice(r).map((function(e,t){return R.a.createElement(y.b,{key:t},e)}))))}},277:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return s}));var r=function(e){return new Promise((function(t){return setTimeout(t,e)}))},u=10,a=function(){return u++},s=function(){}},278:function(e,t){e.exports={"/users":[{id:1,name:"John Doe"},{id:2,name:"Jane Doe"}]}},279:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3),u=n(4),a=r.a.div.withConfig({displayName:"Containers__FlexContainer",componentId:"osdxjy-0"})(["display:flex;& > * + *{margin-left:5rem;border-left:1px dashed ",";padding-left:2rem;}"],u.c)},281:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(2),u=n.n(r),a=n(0),s=n.n(a),c=n(16);function i(e){var t=e.initiallyMounted,n=e.children,r=Object(a.useReducer)((function(e){return!e}),!!t),i=u()(r,2),o=i[0],l=i[1];return s.a.createElement(s.a.Fragment,null,s.a.createElement(c.b,{onClick:l},o?"Unmount":"Mount"),o&&n)}},282:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(6),u=n.n(r),a=n(2),s=n.n(a),c=n(8),i=n.n(c),o=n(0),l=n.n(o),f=n(3).a.input.withConfig({displayName:"Input__StyledInput",componentId:"tgycnj-0"})(["margin-right:1rem;&[disabled]{text-decoration:line-through;}"]);function d(e){var t=e.children,n=e.disabled,r=i()(e,["children","disabled"]),a=Object(o.useState)(""),c=s()(a,2),d=c[0],m=c[1];return Object(o.useEffect)((function(){!n&&m("")}),[n]),l.a.createElement("div",null,l.a.createElement(f,u()({type:"text",disabled:n,value:d,onChange:function(e){return m(e.target.value)}},r)),t(d))}},324:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return de}));var r,u,a,s,c,i,o,l,f=n(0),d=n.n(f),m=n(7),b=n.n(m),h=n(298),E=n(286),p="IDLE",v="NOT_LOADED",O="LOADING",R="LOAD_ERROR",j="ADDING",y="ADD_ERROR",w="REMOVING",k="REMOVE_ERROR",x="LOAD",g="LOAD_SUCCESS",D="LOAD_FAILURE",q="ADD",U="ADD_SUCCESS",_="ADD_FAILURE",A="REMOVE",S="REMOVE_SUCCESS",C="REMOVE_FAILURE",L=Object(h.a)({id:"users",initial:v,context:{users:[]},states:(l={},b()(l,v,{on:b()({},x,O)}),b()(l,p,{on:(r={},b()(r,q,j),b()(r,A,w),r)}),b()(l,O,{on:(u={},b()(u,g,{target:p,actions:Object(E.b)({users:function(e,t){return e.users.concat(t.users)}})}),b()(u,D,R),u)}),b()(l,R,(a={},b()(a,q,j),b()(a,A,w),a)),b()(l,j,{on:(s={},b()(s,U,{target:p,actions:Object(E.b)({users:function(e,t){return e.users.concat(t.user)}})}),b()(s,_,y),s)}),b()(l,y,(c={},b()(c,q,j),b()(c,A,w),c)),b()(l,w,{on:(i={},b()(i,S,{target:p,actions:Object(E.b)({users:function(e,t){return e.users.filter((function(e){return e.id!==t.user.id}))}})}),b()(i,C,k),i)}),b()(l,k,(o={},b()(o,q,j),b()(o,A,w),o)),l)}),I=n(2),F=n.n(I),M=n(308),N=n(275),T=q,P=U,V=_,G=A,J=S,K=C,H=x,X=g,z=D;var B=n(35),Q=n(17),W=n(282),Y=n(16),Z=n(33),$=O,ee=v,te=R,ne=w,re=k,ue=j,ae=y;function se(){Object(Z.b)("UserList");var e,t,n,r,u,a,s,c=(e=Object(M.useMachine)(L),t=F()(e,2),n=t[0],r=n.value,u=n.context,a=t[1],s=r===v,Object(f.useEffect)((function(){s&&(a(H),N.b.getUsers().then((function(e){return a(X,{users:e})})).catch((function(){return a(z)})))}),[s,a]),{state:r,users:u.users,add:function(e){a(T),N.b.addUser(e).then((function(e){return a(P,{user:e})})).catch((function(){return a(V)}))},remove:function(e){a(G),N.b.removeUser(e).then((function(){return a(J,{user:e})})).catch((function(){return a(K)}))}}),i=c.state,o=c.users,l=c.add,m=c.remove;return i===$||i===ee?d.a.createElement(B.b,null):i===te?d.a.createElement(B.a,null):d.a.createElement(d.a.Fragment,null,d.a.createElement(Q.a,null,o.map((function(e){return d.a.createElement(Q.b,{key:e.id,onRemove:function(){return m(e)}},e.name)}))),d.a.createElement(W.a,{disabled:i===ue},(function(e){return d.a.createElement(Y.b,{disabled:i===ue,onClick:function(){return l(e)}},"Add user")})),i===ne&&d.a.createElement(B.b,null,"Removing user..."),i===re&&d.a.createElement(B.a,null,"Failed to remove user"),i===ue&&d.a.createElement(B.b,null,"Adding user..."),i===ae&&d.a.createElement(B.a,null,"Failed to add user"))}var ce=n(34),ie=n(21),oe=n(38),le=n(281),fe=n(279);function de(){return d.a.createElement(d.a.Fragment,null,d.a.createElement(ce.b,null,"Xstate"),d.a.createElement(Y.a,null,d.a.createElement(ie.a,{text:"machine.js",fileName:"components/xstate/machine.js"}),d.a.createElement(ie.a,{text:"useUsers.js",fileName:"components/xstate/useUsers.js"}),d.a.createElement(ie.a,{text:"UserList.js",fileName:"components/xstate/UserList.js"})),d.a.createElement("br",null),d.a.createElement(le.a,null,d.a.createElement(se,null)),d.a.createElement(fe.a,null,d.a.createElement(oe.b,null),d.a.createElement(N.a,null)))}}}]);