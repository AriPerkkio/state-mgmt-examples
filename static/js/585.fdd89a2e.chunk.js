(self.webpackChunkstate_mgmt_examples=self.webpackChunkstate_mgmt_examples||[]).push([[585],{7025:function(e,t,n){"use strict";n.d(t,{Tt:function(){return w},ZP:function(){return R},Rf:function(){return E}});var r=n(7757),s=n.n(r),u=n(8926),i=n.n(u),o=n(4575),c=n.n(o),a=n(3913),l=n.n(a),d=n(9713),f=n.n(d),m=n(8903),h=n(7746),g=n.n(h),p=function(){function e(){var t=this;c()(this,e),f()(this,"requests",[]),f()(this,"subscribers",[]),f()(this,"getUsers",(function(){return t._fetch("/users")})),f()(this,"addUser",function(){var e=i()(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.addRequest("POST /users"),e.next=3,(0,m.gw)(2e3);case 3:return t.addRequest("OK /users"),e.abrupt("return",{name:n,id:(0,m.EL)()});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),f()(this,"removeUser",function(){var e=i()(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.addRequest("DELETE /users/".concat(n.id)),e.next=3,(0,m.gw)(2e3);case 3:t.addRequest("OK /users/".concat(n.id));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),f()(this,"clearRequests",(function(){t.requests=[],t.notifySubscribers()}))}var t,n;return l()(e,[{key:"_fetch",value:(n=i()(s().mark((function e(t){var n,r,u,o=this,c=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},r=n.delayMs,u=t.replace(this.baseUrl,""),this.addRequest("GET ".concat(u)),e.abrupt("return",this._mockFetch(t).then((function(e){if(!e.ok)throw new Error("Request to ".concat(t," failed with HTTP").concat(e.status));return e})).then((function(e){return e.json()})).then(function(){var e=i()(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.gw)(r||2e3);case 2:return o.addRequest("OK ".concat(u)),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"subscribe",value:function(e){this.subscribers.push(e),e(this.reqests)}},{key:"unSubscribe",value:function(e){this.subscribers=this.subscribers.filter((function(t){return t!==e}))}},{key:"addRequest",value:function(e){this.requests.push(e),this.notifySubscribers()}},{key:"notifySubscribers",value:function(){var e=this;this.subscribers.forEach((function(t){return t(e.requests)}))}},{key:"_mockFetch",value:(t=i()(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g()[t],e.abrupt("return",{ok:!!n,status:n?200:404,json:function(){return new Promise((function(e){return e(n)}))}});case 2:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}(),v=new p,R=v,E=v.getUsers,U=n(3038),b=n.n(U),$=n(7294),x=n(9434),k=n(5973),y=$RefreshSig$();function w(){y();var e=(0,$.useReducer)((function(e){return e+1}),0),t=b()(e,2)[1];(0,$.useEffect)((function(){return R.subscribe(t),function(){R.unSubscribe(t),R.clearRequests()}}),[]);var n=R.requests.length,r=n>10?n-10:0;return $.createElement("section",null,$.createElement(x.H3,{onClick:R.clearRequests,style:{cursor:"pointer"}},"API requests, click to reset"),$.createElement(k.a,null,n>10&&$.createElement(k.H,null,"..."),R.requests.slice(r).map((function(e,t){return $.createElement(k.H,{key:t},e)}))))}y(w,"UxqsAPbyOOo6jkpO1hjMpCydUI8="),$RefreshReg$(w,"ApiRequests")},7746:function(e){e.exports={"/users":[{id:1,name:"John Doe"},{id:2,name:"Jane Doe"}]}},3225:function(e,t,n){"use strict";n.d(t,{E:function(){return u}});var r=n(9163),s=n(9630),u=r.ZP.div.withConfig({displayName:"Containers__FlexContainer",componentId:"osdxjy-0"})(["display:flex;& > * + *{margin-left:5rem;border-left:1px dashed ",";padding-left:2rem;}"],s.A2)},6722:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var r,s,u=n(7154),i=n.n(u),o=n(3038),c=n.n(o),a=n(6479),l=n.n(a),d=n(7294),f=n(9163),m=$RefreshSig$(),h=f.ZP.input.withConfig({displayName:"Input__StyledInput",componentId:"tgycnj-0"})(["margin-right:1rem;&[disabled]{text-decoration:line-through;}"]);function g(e){m();var t=e.children,n=e.disabled,r=l()(e,["children","disabled"]),s=(0,d.useState)(""),u=c()(s,2),o=u[0],a=u[1];return(0,d.useEffect)((function(){!n&&a("")}),[n]),d.createElement("div",null,d.createElement(h,i()({type:"text",disabled:n,value:o,onChange:function(e){return a(e.target.value)}},r)),t(o))}r=h,m(g,"aFIykL0K1j3we4veeaDstLdSuC8="),s=g,$RefreshReg$(r,"StyledInput"),$RefreshReg$(s,"Input")},448:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(3038),s=n.n(r),u=n(7294),i=n(9693),o=$RefreshSig$();function c(e){o();var t=e.initiallyMounted,n=e.children,r=(0,u.useReducer)((function(e){return!e}),!!t),c=s()(r,2),a=c[0],l=c[1];return u.createElement(u.Fragment,null,u.createElement(i.Z,{onClick:l},a?"Unmount":"Mount"),a&&n)}o(c,"SGBRyZ8qj4KP74qoZGVxnnGCTRI="),$RefreshReg$(c,"MountToggle")},8903:function(e,t,n){"use strict";n.d(t,{gw:function(){return r},EL:function(){return u},ZT:function(){return i}});var r=function(e){return new Promise((function(t){return setTimeout(t,e)}))},s=10,u=function(){return s++},i=function(){}},3585:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return H}});var r,s,u=n(7294),i=n(7703),o=n(7307),c=n(7025),a=(0,o.oM)({name:"users",initialState:{users:[],isLoading:!1,hasLoaded:!1,error:!1,isAdding:!1,errorAdding:!1,isRemoving:!1,errorRemoving:!1},reducers:{setLoading:function(e){e.isLoading=!0,e.error=!1},setUsers:function(e,t){e.isLoading=!1,e.hasLoaded=!0,e.users=t.payload},setError:function(e){e.isLoading=!1,e.hasLoaded=!0,e.error=!0},setAdding:function(e){e.isAdding=!0,e.errorAdding=!1},addUser:function(e,t){e.isAdding=!1,e.users.push(t.payload)},setAddingError:function(e){e.isAdding=!1,e.errorAdding=!0},setRemoving:function(e){e.isRemoving=!0,e.errorRemoving=!1},removeUser:function(e,t){e.isRemoving=!1,e.users=e.users.filter((function(e){return e.id!==t.payload.id}))},setRemovingError:function(e){e.isRemoving=!1,e.errorRemoving=!0}}}),l=a.actions,d=l.setLoading,f=l.setUsers,m=l.setError,h=l.setAdding,g=l.addUser,p=l.setAddingError,v=l.setRemoving,R=l.removeUser,E=l.setRemovingError,U=a.reducer,b=n(5973),$=n(4494),x=$RefreshSig$(),k=s=x(u.memo(r=x((function(e){x();var t=e.name,n=e.id;(0,$.tc)("UserItem: ".concat(t));var r=(0,i.useDispatch)();return u.createElement(b.H,{onRemove:function(){return r((e={name:t,id:n},function(t){t(v()),c.ZP.removeUser(e).then((function(){return t(R(e))})).catch((function(){return t(E())}))}));var e}},t)}),"wd+XM1IGdpP37WUxZXwNSWwTecU=",!1,(function(){return[$.tc,i.useDispatch]}))),"wd+XM1IGdpP37WUxZXwNSWwTecU=",!1,(function(){return[$.tc,i.useDispatch]}));$RefreshReg$(r,"%default%$React.memo"),$RefreshReg$(s,"%default%");var y=n(2614),w=$RefreshSig$();function S(e){w();var t=e.users,n=e.isLoading,r=e.shouldFetch,s=e.error,i=e.loadUsers;return(0,$.tc)("UserList"),(0,u.useEffect)((function(){r&&i()}),[r,i]),n||r?u.createElement(y.a,null):s?u.createElement(y.j,null):u.createElement(b.a,null,t.map((function(e){return u.createElement(k,{key:e.id,id:e.id,name:e.name})})))}w(S,"ovg+HIuBbNIr+BlVzWBYeOp6iiE=",!1,(function(){return[$.tc]})),I=S;var I,A={loadUsers:function(){return function(e){e(d()),c.ZP.getUsers().then((function(t){return e(f(t))})).catch((function(){return e(m())}))}}},L=(0,i.connect)((function(e){return{users:e.users,isLoading:e.isLoading,shouldFetch:!e.isLoading&&!e.hasLoaded,error:e.error}}),A)(S);$RefreshReg$(I,"UserList");var j=n(9693),q=n(6722),Z=$RefreshSig$();function O(){Z(),(0,$.tc)("UserInput");var e=(0,i.useSelector)((function(e){return e.isAdding})),t=(0,i.useDispatch)();return u.createElement(q.Z,{disabled:e},(function(n){return u.createElement(j.Z,{disabled:e,onClick:function(){return function(e){return t(function(e){return function(t){t(h()),c.ZP.addUser(e).then((function(e){return t(g(e))})).catch((function(){return t(p())}))}}(e))}(n)}},"Add user")}))}Z(O,"c4KCzwajFrp9BUdA+aO9gmLYGZI=",!1,(function(){return[$.tc,i.useSelector,i.useDispatch]})),$RefreshReg$(O,"UserInput");var P=$RefreshSig$();function C(){P(),(0,$.tc)("UserIndicators");var e=(0,i.useSelector)((function(e){return{isRemoving:e.isRemoving,errorRemoving:e.errorRemoving,isAdding:e.isAdding,errorAdding:e.errorAdding}})),t=e.isRemoving,n=e.errorRemoving,r=e.isAdding,s=e.errorAdding;return u.createElement(u.Fragment,null,t&&u.createElement(y.a,null,"Removing user..."),n&&u.createElement(y.j,null,"Failed to remove user"),r&&u.createElement(y.a,null,"Adding user..."),s&&u.createElement(y.j,null,"Failed to add user"))}P(C,"IIKXq6qZZf2d0p+D7A/hlDN440s=",!1,(function(){return[$.tc,i.useSelector]})),$RefreshReg$(C,"UserIndicators");var T=$RefreshSig$(),N=(0,o.xC)({reducer:U});function _(){return T(),(0,$.tc)("UserListWrapper"),u.createElement(i.Provider,{store:N},u.createElement(L,null),u.createElement(O,null),u.createElement(C,null))}T(_,"1tajz0682eLN0aQrzvJO/S9cJ4U=",!1,(function(){return[$.tc]})),$RefreshReg$(_,"UsersWrapper");var F=n(5376),D=n(9434),W=n(448),M=n(9268),G=n(3225);function H(){return u.createElement(u.Fragment,null,u.createElement(D.H1,null,"Redux Toolkit"),u.createElement(j._,null,u.createElement(M.Ou,{text:"UsersSlice.js",fileName:"components/redux-toolkit/UsersSlice.js"}),u.createElement(M.Ou,{text:"UsersWrapper.js",fileName:"components/redux-toolkit/UsersWrapper.js"}),u.createElement(M.Ou,{text:"UserList.js",fileName:"components/redux-toolkit/UserList.js"}),u.createElement(M.Ou,{text:"UserItem.js",fileName:"components/redux-toolkit/UserItem.js"}),u.createElement(M.Ou,{text:"UserInput.js",fileName:"components/redux-toolkit/UserInput.js"}),u.createElement(M.Ou,{text:"UserIndicators.js",fileName:"components/redux-toolkit/UserIndicators.js"})),u.createElement(W.Z,null,u.createElement(_,null)),u.createElement(G.E,null,u.createElement(F.Z,null),u.createElement(c.Tt,null)))}$RefreshReg$(H,"ReduxToolkitView")}}]);