(self.webpackChunkstate_mgmt_examples=self.webpackChunkstate_mgmt_examples||[]).push([[689],{2108:function(e,t,r){"use strict";r.d(t,{Tt:function(){return _},ZP:function(){return E},Rf:function(){return x}});var n=r(7757),s=r.n(n),u=r(8926),c=r.n(u),a=r(4575),i=r.n(a),o=r(3913),l=r.n(o),d=r(9713),f=r.n(d),m=r(6967),p=r(7808),g=r.n(p),h=function(){function e(){var t=this;i()(this,e),f()(this,"requests",[]),f()(this,"subscribers",[]),f()(this,"getUsers",(function(){return t._fetch("/users")})),f()(this,"addUser",function(){var e=c()(s().mark((function e(r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.addRequest("POST /users"),e.next=3,(0,m.gw)(2e3);case 3:return t.addRequest("OK /users"),e.abrupt("return",{name:r,id:(0,m.EL)()});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),f()(this,"removeUser",function(){var e=c()(s().mark((function e(r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.addRequest("DELETE /users/".concat(r.id)),e.next=3,(0,m.gw)(2e3);case 3:t.addRequest("OK /users/".concat(r.id));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),f()(this,"clearRequests",(function(){t.requests=[],t.notifySubscribers()}))}var t,r;return l()(e,[{key:"_fetch",value:(r=c()(s().mark((function e(t){var r,n,u,a=this,i=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:{},n=r.delayMs,u=t.replace(this.baseUrl,""),this.addRequest("GET ".concat(u)),e.abrupt("return",this._mockFetch(t).then((function(e){if(!e.ok)throw new Error("Request to ".concat(t," failed with HTTP").concat(e.status));return e})).then((function(e){return e.json()})).then(function(){var e=c()(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.gw)(n||2e3);case 2:return a.addRequest("OK ".concat(u)),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"subscribe",value:function(e){this.subscribers.push(e),e(this.reqests)}},{key:"unSubscribe",value:function(e){this.subscribers=this.subscribers.filter((function(t){return t!==e}))}},{key:"addRequest",value:function(e){this.requests.push(e),this.notifySubscribers()}},{key:"notifySubscribers",value:function(){var e=this;this.subscribers.forEach((function(t){return t(e.requests)}))}},{key:"_mockFetch",value:(t=c()(s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g()[t],e.abrupt("return",{ok:!!r,status:r?200:404,json:function(){return new Promise((function(e){return e(r)}))}});case 2:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}(),v=new h,E=v,x=v.getUsers,R=r(3038),b=r.n(R),y=r(7294),O=r(5049),w=r(3520);function _(){var e=(0,y.useReducer)((function(e){return e+1}),0),t=b()(e,2)[1];(0,y.useEffect)((function(){return E.subscribe(t),function(){E.unSubscribe(t),E.clearRequests()}}),[]);var r=E.requests.length,n=r>10?r-10:0;return y.createElement("section",null,y.createElement(O.H3,{onClick:E.clearRequests,style:{cursor:"pointer"}},"API requests, click to reset"),y.createElement(w.a,null,r>10&&y.createElement(w.H,null,"..."),E.requests.slice(n).map((function(e,t){return y.createElement(w.H,{key:t},e)}))))}},7808:function(e){e.exports={"/users":[{id:1,name:"John Doe"},{id:2,name:"Jane Doe"}]}},1830:function(e,t,r){"use strict";r.d(t,{E:function(){return u}});var n=r(9163),s=r(9848),u=n.ZP.div.withConfig({displayName:"Containers__FlexContainer",componentId:"osdxjy-0"})(["display:flex;& > * + *{margin-left:5rem;border-left:1px dashed ",";padding-left:2rem;}"],s.A2)},3242:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var n=r(7154),s=r.n(n),u=r(3038),c=r.n(u),a=r(6479),i=r.n(a),o=r(7294),l=r(9163).ZP.input.withConfig({displayName:"Input__StyledInput",componentId:"tgycnj-0"})(["margin-right:1rem;&[disabled]{text-decoration:line-through;}"]);function d(e){var t=e.children,r=e.disabled,n=i()(e,["children","disabled"]),u=(0,o.useState)(""),a=c()(u,2),d=a[0],f=a[1];return(0,o.useEffect)((function(){!r&&f("")}),[r]),o.createElement("div",null,o.createElement(l,s()({type:"text",disabled:r,value:d,onChange:function(e){return f(e.target.value)}},n)),t(d))}},1162:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(3038),s=r.n(n),u=r(7294),c=r(5109);function a(e){var t=e.initiallyMounted,r=e.children,n=(0,u.useReducer)((function(e){return!e}),!!t),a=s()(n,2),i=a[0],o=a[1];return u.createElement(u.Fragment,null,u.createElement(c.Z,{onClick:o},i?"Unmount":"Mount"),i&&r)}},6967:function(e,t,r){"use strict";r.d(t,{gw:function(){return n},EL:function(){return u},ZT:function(){return c}});var n=function(e){return new Promise((function(t){return setTimeout(t,e)}))},s=10,u=function(){return s++},c=function(){}},2689:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return se}});var n=r(7294),s=r(7703),u=r(4890),c=r(797),a=r(319),i=r.n(a),o=r(9713),l=r.n(o),d="ON_USERS_LOAD_START",f="ON_USERS_LOAD_SUCCESS",m="ON_USERS_LOAD_ERROR",p="ON_USER_ADD_START",g="ON_USER_ADD_SUCCESS",h="ON_USER_ADD_ERROR",v="ON_USER_REMOVE_START",E="ON_USER_REMOVE_SUCCESS",x="ON_USER_REMOVE_ERROR";function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){l()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y={users:[],isLoading:!1,hasLoaded:!1,error:!1,isAdding:!1,errorAdding:!1,isRemoving:!1,errorRemoving:!1},O=r(3520),w=r(3082),_=n.memo((function(e){var t=e.name,r=e.id;(0,w.tc)("UserItem: ".concat(t));var u=(0,s.useDispatch)();return n.createElement(O.H,{onRemove:function(){u({type:v,user:{name:t,id:r}})}},t)})),S=r(2938),k=(0,s.connect)((function(e){return{users:e.users,isLoading:e.isLoading,shouldFetch:!e.isLoading&&!e.hasLoaded,error:e.error}}))((function(e){var t=e.users,r=e.isLoading,s=e.shouldFetch,u=e.error,c=e.dispatch;return(0,w.tc)("UserList"),(0,n.useEffect)((function(){s&&c({type:d})}),[s,c]),r||s?n.createElement(S.a,null):u?n.createElement(S.j,null):n.createElement(O.a,null,t.map((function(e){return n.createElement(_,{key:e.id,id:e.id,name:e.name})})))})),U=r(5109),j=r(3242);function A(){(0,w.tc)("UserInput");var e=(0,s.useSelector)((function(e){return e.isAdding})),t=(0,s.useDispatch)();return n.createElement(j.Z,{disabled:e},(function(r){return n.createElement(U.Z,{disabled:e,onClick:function(){return function(e){t({type:p,user:{name:e}})}(r)}},"Add user")}))}function L(){(0,w.tc)("UserIndicators");var e=(0,s.useSelector)((function(e){return{isRemoving:e.isRemoving,errorRemoving:e.errorRemoving,isAdding:e.isAdding,errorAdding:e.errorAdding}})),t=e.isRemoving,r=e.errorRemoving,u=e.isAdding,c=e.errorAdding;return n.createElement(n.Fragment,null,t&&n.createElement(S.a,null,"Removing user..."),r&&n.createElement(S.j,null,"Failed to remove user"),u&&n.createElement(S.a,null,"Adding user..."),c&&n.createElement(S.j,null,"Failed to add user"))}var P=r(7757),q=r.n(P),N=r(4857),D=r(2108),C=q().mark(H),T=q().mark(K),Z=q().mark(V),I=q().mark(W),F=q().mark(J),M=q().mark(G),z=q().mark($);function H(){var e;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,N.RE)(D.ZP.getUsers);case 3:return e=t.sent,t.next=6,(0,N.gz)({type:f,users:e});case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,(0,N.gz)({type:m});case 12:case"end":return t.stop()}}),C,null,[[0,8]])}function K(e){var t;return q().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,N.RE)(D.ZP.addUser,e.user.name);case 3:return t=r.sent,r.next=6,(0,N.gz)({type:g,user:t});case 6:r.next=12;break;case 8:return r.prev=8,r.t0=r.catch(0),r.next=12,(0,N.gz)({type:h});case 12:case"end":return r.stop()}}),T,null,[[0,8]])}function V(e){return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,N.RE)(D.ZP.removeUser,e.user);case 3:return t.next=5,(0,N.gz)({type:E,user:e.user});case 5:t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(0),t.next=11,(0,N.gz)({type:x});case 11:case"end":return t.stop()}}),Z,null,[[0,7]])}function W(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.A7)(d,H);case 2:case"end":return e.stop()}}),I)}function J(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.A7)(p,K);case 2:case"end":return e.stop()}}),F)}function G(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.A7)(v,V);case 2:case"end":return e.stop()}}),M)}function $(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.$6)([W(),J(),G()]);case 2:case"end":return e.stop()}}),z)}var B=(0,c.ZP)(),Q=(0,u.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return b(b({},e),{},{isLoading:!0,hasLoaded:!0});case f:return b(b({},e),{},{isLoading:!1,users:t.users});case m:return b(b({},e),{},{isLoading:!1,error:!0});case p:return b(b({},e),{},{isAdding:!0,errorAdding:!1});case g:return b(b({},e),{},{isAdding:!1,users:[].concat(i()(e.users),[t.user])});case h:return b(b({},e),{},{isAdding:!1,errorAdding:!0});case v:return b(b({},e),{},{isRemoving:!0,errorRemoving:!1});case E:return b(b({},e),{},{users:e.users.filter((function(e){return e.id!==t.user.id})),isRemoving:!1});case x:return b(b({},e),{},{isRemoving:!1,errorRemoving:!0});default:return e}}),(0,u.applyMiddleware)(B));function X(){return(0,w.tc)("UserListWrapper"),n.createElement(s.Provider,{store:Q},n.createElement(k,null),n.createElement(A,null),n.createElement(L,null))}B.run($);var Y=r(6406),ee=r(5049),te=r(1162),re=r(5943),ne=r(1830);function se(){return n.createElement(n.Fragment,null,n.createElement(ee.H1,null,"Redux Saga"),n.createElement(U._,null,n.createElement(re.Ou,{text:"sagas.js",fileName:"components/redux-saga/sagas.js"}),n.createElement(re.Ou,{text:"actions.js",fileName:"components/redux-saga/actions.js"}),n.createElement(re.Ou,{text:"reducer.js",fileName:"components/redux-saga/reducer.js"}),n.createElement(re.Ou,{text:"UsersWrapper.js",fileName:"components/redux-saga/UsersWrapper.js"}),n.createElement(re.Ou,{text:"UserList.js",fileName:"components/redux-saga/UserList.js"}),n.createElement(re.Ou,{text:"UserInput.js",fileName:"components/redux-saga/UserInput.js"}),n.createElement(re.Ou,{text:"UserItem.js",fileName:"components/redux-saga/UserItem.js"}),n.createElement(re.Ou,{text:"UserIndicators.js",fileName:"components/redux-saga/UserIndicators.js"})),n.createElement(te.Z,null,n.createElement(X,null)),n.createElement(ne.E,null,n.createElement(Y.Z,null),n.createElement(D.Tt,null)))}}}]);